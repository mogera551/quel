/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/bindInfo/BindInfo.js":
/*!**********************************!*\
  !*** ./src/bindInfo/BindInfo.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BindInfo)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n\r\n\r\nclass BindInfo {\r\n  /**\r\n   * @type {Node}\r\n   */\r\n  #node;\r\n  get node() {\r\n    return this.#node;\r\n  }\r\n  set node(node) {\r\n    this.#node = node;\r\n  }\r\n  /**\r\n   * @type {HTMLElement}\r\n   */\r\n  get element() {\r\n    return (this.node instanceof HTMLElement) ? this.node : _utils_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].raise(\"not HTMLElement\");\r\n  }\r\n  /**\r\n   * @type {string}\r\n   */\r\n  #nodeProperty;\r\n  get nodeProperty() {\r\n    return this.#nodeProperty;\r\n  }\r\n  set nodeProperty(value) {\r\n    this.#nodeProperty = value;\r\n  }\r\n\r\n  /**\r\n   * @type {string[]}\r\n   */\r\n  #nodePropertyElements;\r\n  get nodePropertyElements() {\r\n    return this.#nodePropertyElements;\r\n  }\r\n  set nodePropertyElements(value) {\r\n    this.#nodePropertyElements = value;\r\n  }\r\n\r\n  /**\r\n   * @type {Component}\r\n   */\r\n  component;\r\n  /**\r\n   * @type {ViewModel}\r\n   */\r\n  viewModel;\r\n  /**\r\n   * @type {string}\r\n   */\r\n  #viewModelProperty;\r\n  get viewModelProperty() {\r\n    return this.#viewModelProperty;\r\n  }\r\n  set viewModelProperty(value) {\r\n    this.#viewModelProperty = value;\r\n  }\r\n  /**\r\n   * @type {Filter[]}\r\n   */\r\n  filters;\r\n\r\n  /**\r\n   * @type {number[]}\r\n   */\r\n  #indexes;\r\n  get indexes() {\r\n    return this.#indexes;\r\n  }\r\n  set indexes(value) {\r\n    this.#indexes = value;\r\n    this.#indexesString = value.toString();\r\n    this.#viewModelPropertyKey = this.viewModelProperty + \"\\t\" + this.#indexesString;\r\n  }\r\n  /**\r\n   * @type {string}\r\n   */\r\n  #indexesString;\r\n  get indexesString() {\r\n    return this.#indexesString;\r\n  }\r\n  /**\r\n   * @type {string}\r\n   */\r\n  #viewModelPropertyKey;\r\n  get viewModelPropertyKey() {\r\n    return this.#viewModelPropertyKey;\r\n  }\r\n  /**\r\n   * @type {number[]}\r\n   */\r\n  contextIndexes;\r\n  \r\n  /**\r\n   * @type {any}\r\n   */\r\n  lastNodeValue;\r\n  /**\r\n   * @type\r\n   */\r\n  lastViewModelValue;\r\n\r\n  /**\r\n   * Nodeのプロパティを更新する\r\n   */\r\n  updateNode() {}\r\n\r\n  /**\r\n   * ViewModelのプロパティを更新する\r\n   */\r\n  updateViewModel() {}\r\n\r\n  /**\r\n   * \r\n   * @param {number} index \r\n   * @param {number} diff \r\n   */\r\n  changeIndexes(index, diff) {\r\n    this.indexes[index] = this.indexes[index] + diff;\r\n    this.contextIndexes[index] = this.contextIndexes[index] + diff;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  removeFromParent() { }\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/BindInfo.js?");

/***/ }),

/***/ "./src/bindInfo/Checkbox.js":
/*!**********************************!*\
  !*** ./src/bindInfo/Checkbox.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Checkbox)\n/* harmony export */ });\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../thread/NodeUpdator.js */ \"./src/thread/NodeUpdator.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst toHTMLInputElement = node => (node instanceof HTMLInputElement) ? node : _utils_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].raise();\r\n\r\nclass Checkbox extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  updateNode() {\r\n    const {component, node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const checkbox = toHTMLInputElement(node);\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForOutput(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes), filters);\r\n    if (this.lastViewModelValue !== value) {\r\n      component.updateSlot.addNodeUpdate(new _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_4__.NodeUpdateData(node, nodeProperty, () => {\r\n        checkbox.checked = value.find(value => value === checkbox.value);\r\n      }));\r\n      this.lastViewModelValue = value;\r\n    }\r\n  }\r\n\r\n  updateViewModel() {\r\n    const {node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = bind;\r\n    const checkbox = toHTMLInputElement(node);\r\n    const checkboxValue = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForInput(checkbox.value, filters);\r\n    const setOfValue = new Set(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes));\r\n    (checkbox.checked) ? setOfValue.add(checkboxValue) : setOfValue.delete(checkboxValue);\r\n    const value = Array.from(setOfValue);\r\n    viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](viewModelProperty, indexes, value);\r\n    this.lastViewModelValue = value;\r\n  }\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/Checkbox.js?");

/***/ }),

/***/ "./src/bindInfo/ClassName.js":
/*!***********************************!*\
  !*** ./src/bindInfo/ClassName.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ClassName)\n/* harmony export */ });\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../thread/NodeUpdator.js */ \"./src/thread/NodeUpdator.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * \r\n * @param {Node} node \r\n * @returns {HTMLElement}\r\n */\r\nconst toHTMLElement = node => (node instanceof HTMLElement) ? node : utils.raise(`not HTMLElement`);\r\n\r\nclass ClassName extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  get className() {\r\n    return this.nodePropertyElements[1];\r\n  }\r\n  updateNode() {\r\n    const {component, node, nodeProperty, viewModel, viewModelProperty, indexes, filters, className} = this;\r\n    const element = toHTMLElement(node);\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForOutput(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes), filters);\r\n    if (this.lastViewModelValue !== value) {\r\n      component.updateSlot.addNodeUpdate(new _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__.NodeUpdateData(node, nodeProperty, () => {\r\n        value ? element.classList.add(className) : element.classList.remove(className);\r\n      }));\r\n      this.lastViewModelValue = value;\r\n    }\r\n  }\r\n\r\n  updateViewModel() {\r\n    const {node, nodeProperty, viewModel, viewModelProperty, indexes, filters, className} = this;\r\n    const element = toHTMLElement(node);\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForInput(element.classList.contains(className), filters);\r\n    viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](viewModelProperty, indexes, value);\r\n    this.lastViewModelValue = value;\r\n  }\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/ClassName.js?");

/***/ }),

/***/ "./src/bindInfo/Component.js":
/*!***********************************!*\
  !*** ./src/bindInfo/Component.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ComponentBind)\n/* harmony export */ });\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../thread/NodeUpdator.js */ \"./src/thread/NodeUpdator.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst toComponent = node => (node instanceof _component_Component_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]) ? node : undefined;\r\n\r\nclass ComponentBind extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  get node() {\r\n    return super.node;\r\n  }\r\n  set node(node) {\r\n    const component = toComponent(node);\r\n    component?.data[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_BIND_DATA](component);\r\n    super.node = node;\r\n  }\r\n  get nodeProperty() {\r\n    return super.nodeProperty;\r\n  }\r\n  bindProp() {\r\n    const component = toComponent(this.node);\r\n    component?.data[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_BIND_PROPERTY](this.dataProperty, this.viewModelProperty)\r\n  }\r\n  set nodeProperty(value) {\r\n    super.nodeProperty = value;\r\n  }\r\n  get viewModelProperty() {\r\n    return super.viewModelProperty;\r\n  }\r\n  set viewModelProperty(value) {\r\n    super.viewModelProperty = value;\r\n    if (this.viewModelProperty && this.nodePropertyElements) {\r\n      this.bindProp();\r\n    }\r\n  }\r\n  get nodePropertyElements() {\r\n    return super.nodePropertyElements;\r\n  }\r\n  set nodePropertyElements(value) {\r\n    super.nodePropertyElements = value;\r\n    if (this.viewModelProperty && this.nodePropertyElements) {\r\n      this.bindProp();\r\n    }\r\n  }\r\n\r\n  get dataNameProperty() {\r\n    return this.nodePropertyElements[0];\r\n  }\r\n  get dataProperty() {\r\n    return this.nodePropertyElements[1];\r\n  }\r\n\r\n  updateNode() {\r\n    const {component, node, nodeProperty, dataProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const thisComponent = toComponent(node);\r\n    thisComponent.viewModel?.[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_NOTIFY_FOR_DEPENDENT_PROPS](`$data.${dataProperty}`, []);\r\n  }\r\n\r\n  updateViewModel() {\r\n/*\r\n    const {node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const thisComponent = toComponent(node);\r\n    const value = Filter.applyForInput(node[nodeProperty], filters);\r\n    thisComponent.data\r\n    viewModel[SYM_CALL_DIRECT_SET](viewModelProperty, indexes, value);\r\n    this.lastViewModelValue = value;\r\n*/\r\n  }\r\n\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/Component.js?");

/***/ }),

/***/ "./src/bindInfo/Event.js":
/*!*******************************!*\
  !*** ./src/bindInfo/Event.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Event)\n/* harmony export */ });\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _thread_Processor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../thread/Processor.js */ \"./src/thread/Processor.js\");\n\r\n\r\n\r\n\r\nclass Event extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  #eventType;\r\n  /**\r\n   * @type {string}\r\n   */\r\n  get eventType() {\r\n    return this.#eventType;\r\n  }\r\n  set eventType(value) {\r\n    this.#eventType = value;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  addEventListener() {\r\n    const {component, element, eventType, viewModel, viewModelProperty} = this;\r\n    element.addEventListener(eventType, (event) => {\r\n      event.stopPropagation();\r\n      const contextIndexes = this.contextIndexes;\r\n      const process = new _thread_Processor_js__WEBPACK_IMPORTED_MODULE_2__.ProcessData(\r\n        viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_CALL_DIRECT_CALL], viewModel, [viewModelProperty, contextIndexes, event]\r\n      );\r\n      component.updateSlot.addProcess(process);\r\n    });\r\n  }\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/Event.js?");

/***/ }),

/***/ "./src/bindInfo/Factory.js":
/*!*********************************!*\
  !*** ./src/bindInfo/Factory.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Factory)\n/* harmony export */ });\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/PropertyType.js */ \"./src/node/PropertyType.js\");\n/* harmony import */ var _LevelTop_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LevelTop.js */ \"./src/bindInfo/LevelTop.js\");\n/* harmony import */ var _Level2nd_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Level2nd.js */ \"./src/bindInfo/Level2nd.js\");\n/* harmony import */ var _Level3rd_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Level3rd.js */ \"./src/bindInfo/Level3rd.js\");\n/* harmony import */ var _ClassName_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ClassName.js */ \"./src/bindInfo/ClassName.js\");\n/* harmony import */ var _Radio_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Radio.js */ \"./src/bindInfo/Radio.js\");\n/* harmony import */ var _Checkbox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Checkbox.js */ \"./src/bindInfo/Checkbox.js\");\n/* harmony import */ var _Template_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Template.js */ \"./src/bindInfo/Template.js\");\n/* harmony import */ var _Event_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Event.js */ \"./src/bindInfo/Event.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n/* harmony import */ var _viewModel_PropertyInfo_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../viewModel/PropertyInfo.js */ \"./src/viewModel/PropertyInfo.js\");\n/* harmony import */ var _Component_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Component.js */ \"./src/bindInfo/Component.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst createLevelTop = (bindInfo, info) => Object.assign(new _LevelTop_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"], bindInfo, info);\r\nconst createLevel2nd = (bindInfo, info) => Object.assign(new _Level2nd_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"], bindInfo, info);\r\nconst createLevel3rd = (bindInfo, info) => Object.assign(new _Level3rd_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"], bindInfo, info);\r\nconst createClassName = (bindInfo, info) => Object.assign(new _ClassName_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"], bindInfo, info);\r\nconst createRadio = (bindInfo, info) => Object.assign(new _Radio_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"], bindInfo, info);\r\nconst createCheckbox = (bindInfo, info) => Object.assign(new _Checkbox_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"], bindInfo, info);\r\nconst createTemplate = (bindInfo, info) => Object.assign(new _Template_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"], bindInfo, info);\r\nconst createEvent = (bindInfo, info) => Object.assign(new _Event_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"], bindInfo, info);\r\nconst createComponent = (bindInfo, info) => Object.assign(new _Component_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"], bindInfo, info);\r\n\r\nconst creatorByType = new Map();\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.levelTop, createLevelTop);\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.level2nd, createLevel2nd);\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.level3rd, createLevel3rd);\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.className, createClassName);\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.radio, createRadio);\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.checkbox, createCheckbox);\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.template, createTemplate);\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.event, createEvent);\r\ncreatorByType.set(_node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__.NodePropertyType.component, createComponent);\r\n\r\nclass Factory {\r\n  /**\r\n   * \r\n   * @param {{\r\n   * component:Component,\r\n   * node:Node,\r\n   * nodeProperty:string,\r\n   * viewModel:ViewModel,\r\n   * viewModelProperty:string,\r\n   * filters:Filter[],\r\n   * indexes:number[]\r\n   * }}  \r\n   */\r\n  static create({component, node, nodeProperty, viewModel, viewModelProperty, filters, indexes}) {\r\n    const bindInfo = {component, node, nodeProperty, viewModel, viewModelProperty, filters};\r\n    const propInfo = _viewModel_PropertyInfo_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"].create(viewModelProperty);\r\n    bindInfo.indexes = indexes.slice(0, propInfo.loopLevel);\r\n    bindInfo.contextIndexes = indexes;\r\n    const info = _node_PropertyType_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInfo(node, nodeProperty);\r\n    return creatorByType.get(info.type)(bindInfo, info);\r\n  }\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/Factory.js?");

/***/ }),

/***/ "./src/bindInfo/Level2nd.js":
/*!**********************************!*\
  !*** ./src/bindInfo/Level2nd.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Level2nd)\n/* harmony export */ });\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../thread/NodeUpdator.js */ \"./src/thread/NodeUpdator.js\");\n\r\n\r\n\r\n\r\n\r\nclass Level2nd extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  get nodeProperty1() {\r\n    return this.nodePropertyElements[0];\r\n  }\r\n  get nodeProperty2() {\r\n    return this.nodePropertyElements[1];\r\n  }\r\n\r\n  updateNode() {\r\n    const {component, node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const {nodeProperty1, nodeProperty2} = this;\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForOutput(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes), filters);\r\n    if (this.lastViewModelValue !== value) {\r\n      component.updateSlot.addNodeUpdate(new _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__.NodeUpdateData(node, nodeProperty, () => {\r\n        node[nodeProperty1][nodeProperty2] = value ?? \"\";\r\n      }));\r\n      this.lastViewModelValue = value;\r\n    }\r\n  }\r\n\r\n  updateViewModel() {\r\n    const {node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const {nodeProperty1, nodeProperty2} = this;\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForInput(node[nodeProperty1][nodeProperty2], filters);\r\n    viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](viewModelProperty, indexes, value);\r\n    this.lastViewModelValue = value;\r\n  }\r\n\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/Level2nd.js?");

/***/ }),

/***/ "./src/bindInfo/Level3rd.js":
/*!**********************************!*\
  !*** ./src/bindInfo/Level3rd.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Level3rd)\n/* harmony export */ });\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../thread/NodeUpdator.js */ \"./src/thread/NodeUpdator.js\");\n\r\n\r\n\r\n\r\n\r\nclass Level3rd extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  get nodeProperty1() {\r\n    return this.nodePropertyElements[0];\r\n  }\r\n  get nodeProperty2() {\r\n    return this.nodePropertyElements[1];\r\n  }\r\n  get nodeProperty3() {\r\n    return this.nodePropertyElements[2];\r\n  }\r\n  updateNode() {\r\n    const {component, node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const { nodeProperty1, nodeProperty2, nodeProperty3 } = this;\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForOutput(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes), filters);\r\n    if (this.lastViewModelValue !== value) {\r\n      component.updateSlot.addNodeUpdate(new _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__.NodeUpdateData(node, nodeProperty, () => {\r\n        node[nodeProperty1][nodeProperty2][nodeProperty3] = value ?? \"\";\r\n      }));\r\n      this.lastViewModelValue = value;\r\n    }\r\n  }\r\n\r\n  updateViewModel() {\r\n    const {node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const { nodeProperty1, nodeProperty2, nodeProperty3 } = this;\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForInput(node[nodeProperty1][nodeProperty2][nodeProperty3], filters);\r\n    viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](viewModelProperty, indexes, value);\r\n    this.lastViewModelValue = value;\r\n  }\r\n\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/Level3rd.js?");

/***/ }),

/***/ "./src/bindInfo/LevelTop.js":
/*!**********************************!*\
  !*** ./src/bindInfo/LevelTop.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LevelTop)\n/* harmony export */ });\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../thread/NodeUpdator.js */ \"./src/thread/NodeUpdator.js\");\n\r\n\r\n\r\n\r\n\r\nclass LevelTop extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  updateNode() {\r\n    const {component, node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForOutput(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes), filters);\r\n    if (this.lastViewModelValue !== value) {\r\n      component.updateSlot.addNodeUpdate(new _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_3__.NodeUpdateData(node, nodeProperty, () => {\r\n        node[nodeProperty] = value ?? \"\";\r\n      }));\r\n      this.lastViewModelValue = value;\r\n    }\r\n  }\r\n\r\n  updateViewModel() {\r\n    const {node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForInput(node[nodeProperty], filters);\r\n    viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](viewModelProperty, indexes, value);\r\n    this.lastViewModelValue = value;\r\n  }\r\n\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/LevelTop.js?");

/***/ }),

/***/ "./src/bindInfo/Radio.js":
/*!*******************************!*\
  !*** ./src/bindInfo/Radio.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Radio)\n/* harmony export */ });\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../thread/NodeUpdator.js */ \"./src/thread/NodeUpdator.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst toHTMLInputElement = node => (node instanceof HTMLInputElement) ? node : _utils_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].raise();\r\n\r\nclass Radio extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  updateNode() {\r\n    const {component, node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const radio = toHTMLInputElement(node);\r\n    const value = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForOutput(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes), filters);\r\n    if (this.lastViewModelValue !== value) {\r\n      component.updateSlot.addNodeUpdate(new _thread_NodeUpdator_js__WEBPACK_IMPORTED_MODULE_4__.NodeUpdateData(node, nodeProperty, () => {\r\n        radio.checked = value === radio.value;\r\n      }));\r\n      this.lastViewModelValue = value;\r\n    }\r\n  }\r\n\r\n  updateViewModel() {\r\n    const {node, nodeProperty, viewModel, viewModelProperty, indexes, filters} = this;\r\n    const radio = toHTMLInputElement(node);\r\n    const radioValue = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForInput(radio.value, filters);\r\n    if (radio.checked) {\r\n      viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](viewModelProperty, indexes, radioValue);\r\n      this.lastViewModelValue = radioValue;\r\n    }\r\n  }\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/Radio.js?");

/***/ }),

/***/ "./src/bindInfo/Template.js":
/*!**********************************!*\
  !*** ./src/bindInfo/Template.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TemplateChild\": () => (/* binding */ TemplateChild),\n/* harmony export */   \"default\": () => (/* binding */ Template)\n/* harmony export */ });\n/* harmony import */ var _bind_Binder_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../bind/Binder.js */ \"./src/bind/Binder.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _BindInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * \r\n * @param {Node} node \r\n * @returns {HTMLTemplateElement}\r\n */\r\nconst toHTMLTemplateElement = node => (node instanceof HTMLTemplateElement) ? node : utils.raise(\"not HTMLTemplateElement\");\r\n\r\nclass TemplateChild {\r\n  /**\r\n   * @type {BindInfo[]}\r\n   */\r\n  binds;\r\n  /**\r\n   * @type {Node[]}\r\n   */\r\n  childNodes;\r\n  /**\r\n   * @type {DocumentFragment}\r\n   */\r\n  fragment;\r\n  /**\r\n   * @type {Node}\r\n   */\r\n  get lastNode() {\r\n    return this.childNodes[this.childNodes.length - 1];\r\n  }\r\n  /**\r\n   * @type {node[]|DocumentFragment}\r\n   */\r\n  get nodesForAppend() {\r\n    return this.fragment.childNodes.length > 0 ? [this.fragment] : this.childNodes;\r\n  }\r\n  /**\r\n   * @type {Set<Node>}\r\n   */\r\n  get setOfNodes() {\r\n    return new Set(this.childNodes);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  removeFromParent() {\r\n    this.childNodes.forEach(node => node.parentNode?.removeChild(node));\r\n    this.binds.forEach(bind => bind.removeFromParent());\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  updateNode() {\r\n    this.binds.forEach(bind => {\r\n      bind.updateNode();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {number} index \r\n   * @param {number} diff \r\n   */\r\n  changeIndex(index, diff) {\r\n    this.binds.forEach(bind => bind.changeIndexes(index, diff));\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {Template} templateBind \r\n   * @param {number[]} indexes \r\n   * @returns {TemplateChild}\r\n   */\r\n  static create(templateBind, indexes) {\r\n    const {component, template} = templateBind;\r\n    const rootElement = document.importNode(template.content, true);\r\n    const binds = _bind_Binder_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(template, rootElement, component, indexes);\r\n    const childNodes = Array.from(rootElement.childNodes);\r\n    return Object.assign(new TemplateChild, { binds, childNodes, fragment:rootElement });\r\n  }\r\n}\r\n\r\nclass Template extends _BindInfo_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"] {\r\n  get node() {\r\n    return super.node;\r\n  }\r\n  set node(node) {\r\n    const template = toHTMLTemplateElement(node);\r\n    const comment = document.createComment(`template ${template.dataset[\"bind\"]}`);\r\n    template.parentNode.replaceChild(comment, template);\r\n    super.node = comment;\r\n    this.template = template;\r\n  }\r\n  /**\r\n   * @type {TemplateChild[]}\r\n   */\r\n  templateChildren = [];\r\n  /**\r\n   * @type {HTMLTemplateElement}\r\n   */\r\n  #template;\r\n  get template() {\r\n    return this.#template;\r\n  }\r\n  set template(value) {\r\n    this.#template = value;\r\n  }\r\n\r\n  updateNode() {\r\n    const newValue = (this.nodeProperty === \"loop\") ? this.expandLoop() : this.expandIf();\r\n    this.lastViewModelValue = (newValue instanceof Array) ? newValue.slice() : newValue;\r\n  }\r\n  \r\n  /**\r\n   * \r\n   */\r\n  removeFromParent() {\r\n    this.templateChildren.forEach(child => child.removeFromParent());\r\n/*\r\n    const nodes = this.templateChildren.flatMap(child => child.childNodes);\r\n    if (nodes.length > 0) {\r\n      const oldParentNode = nodes[0].parentNode;\r\n      const newParentNode = oldParentNode.cloneNode(false);\r\n      oldParentNode.parentNode.replaceChild(newParentNode, oldParentNode)\r\n      nodes.forEach(node => node.parentNode.removeChild(node));\r\n      newParentNode.parentNode.replaceChild(oldParentNode, newParentNode);\r\n    }\r\n*/\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  appendToParent() {\r\n    const fragment = document.createDocumentFragment();\r\n    this.templateChildren\r\n      .forEach(child => fragment.appendChild(...child.nodesForAppend));\r\n    this.node.after(fragment);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns {any} newValue\r\n   */\r\n  expandIf() {\r\n    const { viewModel, viewModelProperty, indexes, filters } = this;\r\n    /**\r\n     * @type {any}\r\n     */\r\n    const lastValue = this.lastViewModelValue;\r\n    /**\r\n     * @type {any}\r\n     */\r\n    const newValue = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForOutput(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes), filters);\r\n    if (lastValue !== newValue) {\r\n      this.removeFromParent();\r\n      if (newValue) {\r\n        this.templateChildren = [TemplateChild.create(this, indexes)];\r\n        this.appendToParent();\r\n      } else {\r\n        this.templateChildren = [];\r\n      }\r\n    }\r\n\r\n    // 子要素の展開を実行\r\n    this.templateChildren.forEach(templateChild => templateChild.updateNode());\r\n\r\n    return newValue;\r\n  }\r\n\r\n  /**\r\n   * @returns {any[]} newValue\r\n   */\r\n  expandLoop() {\r\n    const { viewModel, viewModelProperty, indexes, filters } = this;\r\n    /**\r\n     * @type {any[]}\r\n     */\r\n    const lastValue = this.lastViewModelValue ?? [];\r\n    /**\r\n     * @type {any[]}\r\n     */\r\n    const newValue = _filter_Filter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].applyForOutput(viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](viewModelProperty, indexes), filters) ?? [];\r\n\r\n    /**\r\n     * @type {Map<any,number[]>}\r\n     */\r\n    const indexesByLastValue = lastValue.reduce((map, value, index) => {\r\n      map.get(value)?.push(index) ?? map.set(value, [ index ]);\r\n      return map;\r\n    }, new Map);\r\n    /**\r\n     * @type {Map<number,number>}\r\n     */\r\n    const lastIndexByNewIndex = new Map;\r\n    const moveOrCreateIndexes = [];\r\n    // 新しくテンプレート子要素のリストを作成する\r\n    /**\r\n     * @type {TemplateChild[]}\r\n     */\r\n    const newTemplateChildren = newValue.map((value, newIndex) => {\r\n      const lastIndexes = indexesByLastValue.get(value);\r\n      if (typeof lastIndexes === \"undefined\") {\r\n        // 元のインデックスがない場合、新規\r\n        lastIndexByNewIndex.set(newIndex, undefined);\r\n        moveOrCreateIndexes.push(newIndex);\r\n        return TemplateChild.create(this, indexes.concat(newIndex));\r\n      } else {\r\n        // 元のインデックスがある場合、子要素のループインデックスを書き換え\r\n        // indexesByLastValueから、インデックスを削除、最終的に残ったものが削除する子要素\r\n        const lastIndex = lastIndexes.shift();\r\n        lastIndexByNewIndex.set(newIndex, lastIndex);\r\n        const templateChild = this.templateChildren[lastIndex];\r\n        (newIndex !== lastIndex) && templateChild.changeIndex(indexes.length, newIndex - lastIndex);\r\n        const prevLastIndex = lastIndexByNewIndex.get(newIndex - 1);\r\n        if (typeof prevLastIndex === \"undefined\" || prevLastIndex > lastIndex) {\r\n          moveOrCreateIndexes.push(newIndex);\r\n        }\r\n        return templateChild;\r\n      }\r\n    });\r\n    // 削除対象、追加・移動対象のインデックスを取得\r\n    for(const indexes of indexesByLastValue.values()) {\r\n      for(const index of indexes) {\r\n        this.templateChildren[index].removeFromParent();\r\n      }\r\n    }\r\n\r\n    moveOrCreateIndexes.forEach(moveOrCreateIndex => {\r\n      const templateChild = newTemplateChildren[moveOrCreateIndex];\r\n      const beforeNode = newTemplateChildren[moveOrCreateIndex - 1]?.lastNode ?? this.node;\r\n      beforeNode.after(...templateChild.nodesForAppend);\r\n    });\r\n\r\n    // 子要素の展開を実行\r\n    newTemplateChildren.forEach(templateChild => templateChild.updateNode());\r\n\r\n    this.templateChildren = newTemplateChildren;\r\n\r\n    return newValue;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {number} index \r\n   * @param {number} diff \r\n   */\r\n  changeIndexes(index, diff) {\r\n    this.indexes[index] = this.indexes[index] + diff;\r\n    this.templateChildren.forEach(templateChild => templateChild.changeIndex(index, diff));\r\n  }\r\n}\n\n//# sourceURL=webpack://quel/./src/bindInfo/Template.js?");

/***/ }),

/***/ "./src/bind/BindToDomIf.js":
/*!*********************************!*\
  !*** ./src/bind/BindToDomIf.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _bindInfo_BindInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../bindInfo/BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * \r\n   * @param {Node} node\r\n   * @param {Component} component\r\n   * @param {string[]} indexes\r\n   * @returns {BindInfo[]} \r\n   */\r\n  static bind(node, component, indexes) { }\r\n}); \n\n//# sourceURL=webpack://quel/./src/bind/BindToDomIf.js?");

/***/ }),

/***/ "./src/bind/BindToElement.js":
/*!***********************************!*\
  !*** ./src/bind/BindToElement.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _BindToDomIf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BindToDomIf.js */ \"./src/bind/BindToDomIf.js\");\n/* harmony import */ var _bindInfo_BindInfo_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../bindInfo/BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Parser.js */ \"./src/bind/Parser.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _thread_Processor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../thread/Processor.js */ \"./src/thread/Processor.js\");\n/* harmony import */ var _bindInfo_Event_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../bindInfo/Event.js */ \"./src/bindInfo/Event.js\");\n/* harmony import */ var _bindInfo_Factory_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../bindInfo/Factory.js */ \"./src/bindInfo/Factory.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst DATASET_BIND_PROPERTY = \"bind\";\r\nconst DEFAULT_EVENT = \"oninput\";\r\nconst DEFAULT_EVENT_TYPE = DEFAULT_EVENT.slice(2);\r\nconst DEFAULT_PROPERTY = \"textContent\";\r\n\r\n/**\r\n * \r\n * @param {Node} node \r\n * @returns {HTMLElement}\r\n */\r\nconst toHTMLElement = node => (node instanceof HTMLElement) ? node : _utils_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].raise(`not HTMLElement`);\r\n\r\n/**\r\n * \r\n * @param {HTMLElement} element \r\n */\r\nconst getDefaultProperty = element => {\r\n  return element instanceof HTMLSelectElement || element instanceof HTMLTextAreaElement || element instanceof HTMLOptionElement ? \"value\" : \r\n  element instanceof HTMLInputElement ? ((element.type === \"radio\" || element.type === \"checkbox\") ? \"checked\" : \"value\") : \r\n  DEFAULT_PROPERTY;\r\n};\r\n\r\nconst toEvent = bind => (bind instanceof _bindInfo_Event_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]) ? bind : undefined; \r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class extends _BindToDomIf_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n  /**\r\n   * \r\n   * @param {Node} node \r\n   * @param {Component} component\r\n   * @param {number[]} indexes\r\n   * @returns {BindInfo[]}\r\n   */\r\n  static bind(node, component, indexes) {\r\n    const viewModel = component.viewModel;\r\n    const element = toHTMLElement(node);\r\n    const bindText = element.dataset[DATASET_BIND_PROPERTY];\r\n    const defaultName = getDefaultProperty(element);\r\n\r\n    // パース\r\n    const binds = _Parser_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].parse(bindText, defaultName)\r\n        .map(info => {\r\n          const bind = _bindInfo_Factory_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].create(Object.assign(info, {node, component, viewModel, indexes:indexes.slice()}));\r\n          bind.updateNode();\r\n          return bind;\r\n        });\r\n\r\n    // イベントハンドラ設定\r\n    let hasDefaultEvent = false;\r\n    /**\r\n     * @type {BindInfo}\r\n     */\r\n    let defaultBind = null;\r\n    binds.forEach(bind => {\r\n      hasDefaultEvent ||= bind.nodeProperty === DEFAULT_EVENT;\r\n      defaultBind = (bind.nodeProperty === defaultName) ? bind : defaultBind;\r\n      const event = toEvent(bind);\r\n      event && event.addEventListener();\r\n    });\r\n\r\n    if (defaultBind && !hasDefaultEvent) {\r\n      element.addEventListener(DEFAULT_EVENT_TYPE, (event) => {\r\n        event.stopPropagation();\r\n        const process = new _thread_Processor_js__WEBPACK_IMPORTED_MODULE_5__.ProcessData(defaultBind.updateViewModel, defaultBind, []);\r\n        component.updateSlot.addProcess(process);\r\n      });\r\n    }\r\n\r\n    return binds;\r\n  }\r\n\r\n});\n\n//# sourceURL=webpack://quel/./src/bind/BindToElement.js?");

/***/ }),

/***/ "./src/bind/BindToTemplate.js":
/*!************************************!*\
  !*** ./src/bind/BindToTemplate.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _BindToDomIf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BindToDomIf.js */ \"./src/bind/BindToDomIf.js\");\n/* harmony import */ var _bindInfo_BindInfo_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../bindInfo/BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _bindInfo_Template_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../bindInfo/Template.js */ \"./src/bindInfo/Template.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _Binder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Binder.js */ \"./src/bind/Binder.js\");\n/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Parser.js */ \"./src/bind/Parser.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _bindInfo_Factory_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../bindInfo/Factory.js */ \"./src/bindInfo/Factory.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst DATASET_BIND_PROPERTY = \"bind\";\r\n\r\n/**\r\n * \r\n * @param {Node} node \r\n * @returns {HTMLTemplateElement}\r\n */\r\nconst toHTMLTemplateElement = node => (node instanceof HTMLTemplateElement) ? node : _utils_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].raise(\"not HTMLTemplateElement\");\r\n\r\n/**\r\n * @param {BindInfo} bind \r\n * @returns {Template}\r\n */\r\nconst toTemplate = bind => (bind instanceof _bindInfo_Template_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) ? bind : undefined;\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class extends _BindToDomIf_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n  /**\r\n   * \r\n   * @param {Node} node \r\n   * @param {Component} component\r\n   * @param {number[]} indexes\r\n   * @returns {BindInfo[]}\r\n   */\r\n  static bind(node, component, indexes) {\r\n    const viewModel = component.viewModel;\r\n    const template = toHTMLTemplateElement(node);\r\n    const bindText = template.dataset[DATASET_BIND_PROPERTY];\r\n    const binds = _Parser_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].parse(bindText, \"\")\r\n      .map(info => { \r\n        const bind = _bindInfo_Factory_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"].create(Object.assign(info, {node, component, viewModel, indexes:indexes.slice()}));\r\n        return bind;\r\n      });\r\n    if (binds.length === 0) return [];\r\n    const templateBind = toTemplate(binds[0]);\r\n    if (templateBind) {\r\n      if (templateBind.nodeProperty !== \"if\" && templateBind.nodeProperty !== \"loop\") {\r\n        _utils_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].raise(`unknown node property ${templateBind.nodeProperty}`);\r\n      }\r\n      templateBind.updateNode();\r\n      return [ templateBind ];\r\n    } else {\r\n      _utils_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].raise(`not template bind`);\r\n    }\r\n  }\r\n});\n\n//# sourceURL=webpack://quel/./src/bind/BindToTemplate.js?");

/***/ }),

/***/ "./src/bind/BindToText.js":
/*!********************************!*\
  !*** ./src/bind/BindToText.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _BindToDomIf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BindToDomIf.js */ \"./src/bind/BindToDomIf.js\");\n/* harmony import */ var _bindInfo_BindInfo_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../bindInfo/BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Parser.js */ \"./src/bind/Parser.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _bindInfo_Factory_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../bindInfo/Factory.js */ \"./src/bindInfo/Factory.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst DEFAULT_PROPERTY = \"textContent\";\r\n\r\n/**\r\n * \r\n * @param {Node} node \r\n * @returns {Comment}\r\n */\r\nconst toComment = node => (node instanceof Comment) ? node : _utils_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].raise(\"not Comment\");\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class extends _BindToDomIf_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n  /**\r\n   * \r\n   * @param {Node} node \r\n   * @param {Component} component\r\n   * @param {number[]} indexes\r\n   * @returns {BindInfo[]}\r\n   */\r\n  static bind(node, component, indexes) {\r\n    // コメントノードをテキストノードに差し替える\r\n    const viewModel = component.viewModel;\r\n    const comment = toComment(node);\r\n    const bindText = comment.textContent.slice(2); // @@をスキップ\r\n    const textNode = document.createTextNode(\"\");\r\n    comment.parentNode.replaceChild(textNode, comment);\r\n    // パース\r\n    const binds = _Parser_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].parse(bindText, DEFAULT_PROPERTY)\r\n      .map(info => {\r\n        const bind = _bindInfo_Factory_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].create(Object.assign(info, {node:textNode, component, viewModel, indexes:indexes.slice()}));\r\n        bind.updateNode();\r\n        return bind;\r\n      });\r\n    return binds;\r\n  }\r\n\r\n});\n\n//# sourceURL=webpack://quel/./src/bind/BindToText.js?");

/***/ }),

/***/ "./src/bind/Binder.js":
/*!****************************!*\
  !*** ./src/bind/Binder.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _bindInfo_BindInfo_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../bindInfo/BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n/* harmony import */ var _Selector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Selector.js */ \"./src/bind/Selector.js\");\n/* harmony import */ var _BindToTemplate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./BindToTemplate.js */ \"./src/bind/BindToTemplate.js\");\n/* harmony import */ var _BindToElement_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./BindToElement.js */ \"./src/bind/BindToElement.js\");\n/* harmony import */ var _BindToText_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./BindToText.js */ \"./src/bind/BindToText.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * \r\n   * @param {HTMLTemplateElement} template \r\n   * @param {HTMLElement} rootElement \r\n   * @param {Component} component\r\n   * @param {number[]?} indexes\r\n   * @returns {BindInfo[]}\r\n   */\r\n  static bind(template, rootElement, component, indexes = []) {\r\n    const nodes = _Selector_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTargetNodes(template, rootElement);\r\n    return nodes.flatMap(node => \r\n      (node instanceof HTMLTemplateElement) ? _BindToTemplate_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].bind(node, component, indexes) :\r\n      (node instanceof HTMLElement) ? _BindToElement_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].bind(node, component, indexes) :\r\n      (node instanceof Comment) ? _BindToText_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bind(node, component, indexes) : \r\n      _utils_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].raise(`unknown node type`)\r\n    );\r\n  }\r\n\r\n});\n\n//# sourceURL=webpack://quel/./src/bind/Binder.js?");

/***/ }),

/***/ "./src/bind/Binds.js":
/*!***************************!*\
  !*** ./src/bind/Binds.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _bindInfo_Template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../bindInfo/Template.js */ \"./src/bindInfo/Template.js\");\n/* harmony import */ var _bindInfo_BindInfo_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../bindInfo/BindInfo.js */ \"./src/bindInfo/BindInfo.js\");\n\r\n\r\n\r\nconst toTemplate = bind => (bind instanceof _bindInfo_Template_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) ? bind : undefined;\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * @type {BindInfo[]}\r\n   */\r\n  #binds;\r\n  /**\r\n   * @type {Map<string,BindInfo[]>}\r\n   */\r\n  #bindsByKey = new Map;\r\n  constructor(binds) {\r\n    this.#binds = binds;\r\n    this.buildMap();\r\n  }\r\n\r\n  buildMap() {\r\n    /**\r\n     * \r\n     * @param {BindInfo[]} binds \r\n     */\r\n    const buildMap = (binds) => {\r\n      binds.forEach(bind => {\r\n        this.#bindsByKey.get(bind.viewModelPropertyKey)?.push(bind) ?? this.#bindsByKey.set(bind.viewModelPropertyKey, [ bind ]);\r\n        (toTemplate(bind)?.templateChildren ?? []).forEach(templateChild => buildMap(templateChild.binds));\r\n      });\r\n    }\r\n    this.#bindsByKey.clear();\r\n    buildMap(this.#binds);\r\n  }\r\n  /**\r\n   * \r\n   * @param {Set<string>} setOfKey \r\n   * @returns {Template[]}\r\n   */\r\n  getTemplateBinds(setOfKey) {\r\n    const templateBinds = [];\r\n    const stack = [ { binds:this.#binds, children:null, index:-1 } ];\r\n    while(stack.length > 0) {\r\n      const info = stack[stack.length - 1];\r\n      info.index++;\r\n      if (info.binds) {\r\n        if (info.index < info.binds.length) {\r\n          const template = toTemplate(info.binds[info.index]);\r\n          if (template) {\r\n            if (setOfKey.has(template.viewModelPropertyKey)) {\r\n              templateBinds.push(template);\r\n            } else {\r\n              if (template.templateChildren.length > 0) {\r\n                stack.push({ binds:null, children:template.templateChildren, index:-1 });\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          stack.pop();\r\n        }\r\n      } else {\r\n        if (info.index < info.children.length) {\r\n          const child = info.children[info.index];\r\n          if (child.binds.length > 0) {\r\n            stack.push({ binds:child.binds, children:null, index:-1 });\r\n          }\r\n        } else {\r\n          stack.pop();\r\n        }\r\n      }\r\n    }\r\n\r\n    return templateBinds;\r\n  }\r\n  /**\r\n   * updateされたviewModelのプロパティにバインドされているnodeのプロパティを更新する\r\n   * @param {Set<string>} setOfKey \r\n   */\r\n  updateViewModel(setOfKey) {\r\n    // templateを先に展開する\r\n    /**\r\n     * @type {Set<Template>}\r\n     */\r\n    const templateBinds = new Set(this.getTemplateBinds(setOfKey));\r\n    if (templateBinds.size > 0) {\r\n      for(const templateBind of templateBinds) {\r\n        templateBind.updateNode();\r\n      }\r\n      this.buildMap();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {BindInfo[]} binds \r\n     */\r\n    const updateViewModelProperty = (binds) => {\r\n      binds.forEach(bind => {\r\n        if (!templateBinds.has(bind) && setOfKey.has(bind.viewModelPropertyKey)) {\r\n          bind.updateNode();\r\n        }\r\n        toTemplate(bind)?.templateChildren.forEach(templateChild => updateViewModelProperty(templateChild.binds))\r\n      });\r\n    }\r\n    updateViewModelProperty(this.#binds);\r\n  }\r\n\r\n});\n\n//# sourceURL=webpack://quel/./src/bind/Binds.js?");

/***/ }),

/***/ "./src/bind/Parser.js":
/*!****************************!*\
  !*** ./src/bind/Parser.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BindTextInfo\": () => (/* binding */ BindTextInfo),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../filter/Filter.js */ \"./src/filter/Filter.js\");\n\r\n\r\nconst SAMENAME = \"@\";\r\nconst DEFAULT = \"$\";\r\n\r\nclass BindTextInfo {\r\n  /**\r\n   * @type {string}\r\n   */\r\n  nodeProperty;\r\n  /**\r\n   * @type {string}\r\n   */\r\n  viewModelProperty;\r\n  /**\r\n   * @type {Filter[]}\r\n   */\r\n  filters;\r\n}\r\n\r\n/**\r\n * トリム関数\r\n * @param {string} s \r\n * @returns {string}\r\n */\r\nconst trim = s => s.trim();\r\n\r\n/**\r\n * 長さチェック関数\r\n * @param {string} s \r\n * @returns {string}\r\n */\r\nconst has = s => s.length > 0;\r\n\r\n/**\r\n * フィルターのパース\r\n * \"eq,100|falsey\" ---> [Filter(eq, [100]), Filter(falsey)]\r\n * @param {string} text \r\n * @returns {Filter}\r\n */\r\nconst parseFilter = text => {\r\n  const [name, ...options] = text.split(\",\").map(trim);\r\n  return Object.assign(new _filter_Filter_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {name, options});\r\n};\r\n\r\n/**\r\n * ViewModelプロパティのパース\r\n * \"value|eq,100|falsey\" ---> [\"value\", Filter[]]\r\n * @param {string} text \r\n * @returns {{viewModelProperty:string,filters:Filter[]}}\r\n */\r\nconst parseViewModelProperty = text => {\r\n  const [viewModelProperty, ...filterTexts] = text.split(\"|\").map(trim);\r\n  return {viewModelProperty, filters:filterTexts.map(text => parseFilter(text))};\r\n};\r\n\r\n/**\r\n * 式のパース\r\n * \"textContent:value|eq,100|falsey\" ---> [\"textContent\", \"value\", Filter[eq, falsey]]\r\n * @param {string} expr \r\n * @param {string} defaultName \r\n * @returns {{nodeProperty:string,viewModelProp:string,filters:Filter[]}}\r\n */\r\nconst parseExpression = (expr, defaultName) => {\r\n  const [nodeProperty, viewModelPropertyText] = [defaultName].concat(...expr.split(\":\").map(trim)).splice(-2);\r\n  const { viewModelProperty, filters } = parseViewModelProperty(viewModelPropertyText);\r\n  return { nodeProperty, viewModelProperty, filters };\r\n};\r\n\r\n/**\r\n * 属性値のパース\r\n * @param {string} text 属性値\r\n * @param {string} defaultName prop:を省略時、デフォルトのプロパティ値\r\n * @returns {{prop:string,viewModelProp:string,filters:Filter[]}[]}\r\n */\r\nconst parseBindText = (text, defaultName) => {\r\n  return text.split(\";\").map(trim).filter(has).map(s => { \r\n    let { nodeProperty, viewModelProperty, filters } = parseExpression(s, DEFAULT);\r\n    viewModelProperty = viewModelProperty === SAMENAME ? prop : viewModelProperty;\r\n    nodeProperty = nodeProperty === DEFAULT ? defaultName : nodeProperty;\r\n    return { nodeProperty, viewModelProperty, filters };\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * data-bind属性をパースする関数群\r\n */\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * @type {Map<string,BindTextInfo[]>}\r\n   */\r\n  static bindTextsByKey = new Map();\r\n\r\n  /**\r\n   * 属性値のパース\r\n   * @param {string} text 属性値\r\n   * @param {string} defaultName prop:を省略時、デフォルトのプロパティ値\r\n   * @returns {BindTextInfo[]}\r\n   */\r\n  static parse(text, defaultName) {\r\n    const key = text + \"\\t\" + defaultName;\r\n    let binds = this.bindTextsByKey.get(key);\r\n    if (typeof binds === \"undefined\") {\r\n      binds = parseBindText(text, defaultName).map(bind => Object.assign(new BindTextInfo, bind));\r\n      this.bindTextsByKey.set(key, binds);\r\n    }\r\n    return binds;\r\n  }\r\n});\n\n//# sourceURL=webpack://quel/./src/bind/Parser.js?");

/***/ }),

/***/ "./src/bind/Selector.js":
/*!******************************!*\
  !*** ./src/bind/Selector.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst SELECTOR = \"[data-bind]\";\r\n\r\n/**\r\n * ルートノードから、nodeまでのchileNodesのインデックスリストを取得する\r\n * ex.\r\n * rootNode.childNodes[1].childNodes[3].childNodes[7].childNodes[2]\r\n * => [1,3,7,2]\r\n * @param {Node} node \r\n * @returns {number[]}\r\n */\r\nconst getNodeRoute = node => {\r\n  let routeIndexes = [];\r\n  while(node.parentNode != null) {\r\n    routeIndexes = [ Array.from(node.parentNode.childNodes).indexOf(node) ].concat(routeIndexes);\r\n    node = node.parentNode;\r\n  }\r\n  return routeIndexes;\r\n};\r\n\r\n\r\n/**\r\n * \r\n * @param {Node} node \r\n * @returns \r\n */\r\nconst isCommentNode = node => node instanceof Comment && node.textContent[0] === \"@\" && node.textContent[1] === \"@\" && node.textContent[2] !== \"@\";\r\n/**\r\n * \r\n * @param {Node} node \r\n * @returns \r\n */\r\nconst getCommentNodes = node => Array.from(node.childNodes).flatMap(node => getCommentNodes(node).concat(isCommentNode(node) ? node : null)).filter(node => node);\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * @type {Map<HTMLTemplateElement, number[][]>}\r\n   */\r\n  static listOfRouteIndexesByTemplate = new Map();\r\n  /**\r\n   * \r\n   * @param {HTMLTemplateElement} template \r\n   * @param {HTMLElement} rootElement\r\n   * @returns {Node[]}\r\n   */\r\n  static getTargetNodes(template, rootElement) {\r\n    /**\r\n     * @type {Node[]}\r\n     */\r\n    let nodes;\r\n\r\n    if (this.listOfRouteIndexesByTemplate.has(template)) {\r\n      // キャッシュがある場合\r\n      // querySelectorAllをせずにNodeの位置を特定できる\r\n      const listOfRouteIndexes = this.listOfRouteIndexesByTemplate.get(template);\r\n      nodes = listOfRouteIndexes.map(routeIndexes => routeIndexes.reduce((node, routeIndex) => node.childNodes[routeIndex], rootElement));\r\n    } else {\r\n      // data-bindを持つノード、コメントのノードを取得しリストを作成する\r\n      nodes = Array.from(rootElement.querySelectorAll(SELECTOR)).concat(getCommentNodes(rootElement));\r\n\r\n      // ルートから、nodeのインデックスの順番をキャッシュに覚えておく\r\n      this.listOfRouteIndexesByTemplate.set(template, nodes.map(node => getNodeRoute(node)));\r\n    }\r\n    return nodes;\r\n\r\n  }\r\n\r\n});\r\n\r\n\n\n//# sourceURL=webpack://quel/./src/bind/Selector.js?");

/***/ }),

/***/ "./src/component/Component.js":
/*!************************************!*\
  !*** ./src/component/Component.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Component)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _view_View_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../view/View.js */ \"./src/view/View.js\");\n/* harmony import */ var _viewModel_Proxy_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewModel/Proxy.js */ \"./src/viewModel/Proxy.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _thread_Thread_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../thread/Thread.js */ \"./src/thread/Thread.js\");\n/* harmony import */ var _thread_Processor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../thread/Processor.js */ \"./src/thread/Processor.js\");\n/* harmony import */ var _bind_Binds_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../bind/Binds.js */ \"./src/bind/Binds.js\");\n/* harmony import */ var _Data_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Data.js */ \"./src/component/Data.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * \r\n * @param {Node} node \r\n * @returns {Component}\r\n */\r\nconst getParentComponent = (node) => {\r\n  do {\r\n    node = node.parentNode;\r\n    if (node == null) return null;\r\n    if (node instanceof Component) return node;\r\n    if (node instanceof ShadowRoot) {\r\n      if (node.host instanceof Component) return node.host;\r\n      node = node.host;\r\n    }\r\n  } while(true);\r\n};\r\n\r\n/**\r\n * HTMLの変換\r\n * {{loop:}}{{if:}}を<template>へ置換\r\n * {{end:}}を</template>へ置換\r\n * {{...}}を<!--@@...-->へ置換\r\n * @param {string} html \r\n * @returns {string}\r\n */\r\nconst replaceTag = (html) => {\r\n  const stack = [];\r\n  return html.replaceAll(/\\{\\{([^\\}]+)\\}\\}/g, (match, expr) => {\r\n    expr = expr.trim();\r\n    if (expr.startsWith(\"loop:\") || expr.startsWith(\"if:\")) {\r\n      stack.push(expr);\r\n      return `<template data-bind=\"${expr}\">`;\r\n    } else if (expr.startsWith(\"else:\")){\r\n      const saveExpr = stack.at(-1);\r\n      return `</template><template data-bind=\"${saveExpr}|not\">`;\r\n    } else if (expr.startsWith(\"end:\")){\r\n      stack.pop();\r\n      return `</template>`;\r\n    } else {\r\n      return `<!--@@${expr}-->`;\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * @param {string?} html\r\n * @param {string?} css\r\n * @returns {HTMLTemplateElement}\r\n */\r\nconst htmlToTemplate = (html, css) => {\r\n  const template = document.createElement(\"template\");\r\n  template.innerHTML = (css ? `<style>\\n${css}\\n</style>` : \"\") + (html ? replaceTag(html) : \"\");\r\n  return template;\r\n}\r\n\r\nclass Component extends HTMLElement {\r\n  /**\r\n   * @type {string}\r\n   * @static\r\n   */\r\n  static html;\r\n  /**\r\n   * @type {HTMLTemplateElement}\r\n   */\r\n  static template;\r\n  /**\r\n   * @type {class}\r\n   * @static\r\n   */\r\n  static ViewModel;\r\n  /**\r\n   * @type {Proxy<ViewModel>}\r\n   */\r\n  viewModel;\r\n  /**\r\n   * @type {View}\r\n   */\r\n  #view;\r\n  /**\r\n   * @type {Binds}\r\n   */\r\n  #binds;\r\n  /**\r\n   * @type {Thread}\r\n   */\r\n  #thread;\r\n  /**\r\n   * @type {UpdateSlot}\r\n   */\r\n  #updateSlot;\r\n  get updateSlot() {\r\n    if (typeof this.#updateSlot === \"undefined\") {\r\n      this.#updateSlot = _thread_Thread_js__WEBPACK_IMPORTED_MODULE_4__.UpdateSlot.create(() => {\r\n        this.#updateSlot = undefined;\r\n      }, (updateSlotStatus) => {\r\n        if (updateSlotStatus === _thread_Thread_js__WEBPACK_IMPORTED_MODULE_4__.UpdateSlotStatus.beginProcess) {\r\n          this.viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_3__.SYM_CALL_CLEAR_CACHE]();\r\n        }\r\n        if (updateSlotStatus === _thread_Thread_js__WEBPACK_IMPORTED_MODULE_4__.UpdateSlotStatus.beginNotify) {\r\n          this.viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_3__.SYM_CALL_CLEAR_CACHE_NOUPDATED]();\r\n        }\r\n      });\r\n      this.#thread.wakeup(this.#updateSlot);\r\n    }\r\n    return this.#updateSlot;\r\n  }\r\n  /**\r\n   * @type {Object<string,any>}\r\n   */\r\n  #data = (0,_Data_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(this);\r\n  get data() {\r\n    return this.#data;\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n    this.#initialPromise = new Promise((resolve, reject) => {\r\n      this.#initialResolve = resolve;\r\n      this.#initialReject = reject;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @type {string[]}\r\n   */\r\n  static get observedAttributes() {\r\n    return [/* 変更を監視する属性名の配列 */];\r\n  }\r\n  \r\n  /**\r\n   * shadowRootを使ってカプセル化をしない(true)\r\n   * @type {boolean}\r\n   */\r\n  get noShadowRoot() {\r\n    return this.hasAttribute(\"no-shadow-root\");\r\n  }\r\n\r\n  /**\r\n   * viewのルートとなる要素\r\n   * @type {ShadowRoot|HTMLElement}\r\n   */\r\n  get viewRootElement() {\r\n    return this.shadowRoot ?? this;\r\n  }\r\n\r\n  async build() {\r\n    const { template, ViewModel } = this.constructor;\r\n    this.noShadowRoot || this.attachShadow({mode: 'open'});\r\n    this.#thread = new _thread_Thread_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\r\n\r\n    this.#view = new _view_View_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](template, this.viewRootElement);\r\n    const viewModel = Reflect.construct(ViewModel, []);\r\n    this.viewModel = (0,_viewModel_Proxy_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, viewModel);\r\n    await this.viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_3__.SYM_CALL_INIT]();\r\n\r\n    this.updateSlot.addProcess(new _thread_Processor_js__WEBPACK_IMPORTED_MODULE_5__.ProcessData(async () => {\r\n      this.#binds = this.#view.render(this);\r\n      await this.viewModel[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_3__.SYM_CALL_CONNECT]();\r\n    }, this, []));\r\n  }\r\n\r\n  /**\r\n   * @type {Promise}\r\n   */\r\n  #initialPromise;\r\n  /**\r\n   * @type {() => {}}\r\n   */\r\n  #initialResolve;\r\n  #initialReject;\r\n  get initialPromise() {\r\n    return this.#initialPromise;\r\n  }\r\n\r\n  /**\r\n   * @type {Promise}\r\n   */\r\n  #alivePromise;\r\n  /**\r\n   * @type {() => {}}\r\n   */\r\n  #aliveResolve;\r\n  #aliveReject;\r\n  get alivePromise() {\r\n    return this.#alivePromise;\r\n  }\r\n\r\n  /**\r\n   * 親コンポーネント\r\n   * @type {Component}\r\n   */\r\n  #parentComponent;\r\n  get parentComponent() {\r\n    if (typeof this.#parentComponent === \"undefined\") {\r\n      this.#parentComponent = getParentComponent(this);\r\n    }\r\n    return this.#parentComponent;\r\n  }\r\n\r\n  /**\r\n   * DOMツリーへ追加\r\n   */\r\n  async connectedCallback() {\r\n    try {\r\n      this.parentComponent && await this.parentComponent.initialPromise;\r\n      this.#alivePromise = new Promise((resolve, reject) => {\r\n        this.#aliveResolve = resolve;\r\n        this.#aliveReject = reject;\r\n      });\r\n      await this.build();\r\n    } finally {\r\n      this.#initialResolve && this.#initialResolve();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * DOMツリーから削除\r\n   */\r\n  disconnectedCallback() {\r\n    this.#aliveResolve && this.#aliveResolve(this.data);\r\n  }\r\n\r\n  /**\r\n   * 移動時\r\n   */\r\n  adoptedCallback() {\r\n    \r\n  }\r\n\r\n  /**\r\n   * 属性値更新\r\n   * @param {string} name \r\n   * @param {any} oldValue \r\n   * @param {any} newValue \r\n   */\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    \r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {Set<string>} setOfKey \r\n   * @param {number[]} indexes \r\n   */\r\n  notify(setOfKey) {\r\n    this.#binds?.updateViewModel(setOfKey);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} name \r\n   * @param {UserComponentData} componentData \r\n   */\r\n  static regist(name, componentData) {\r\n    const template = htmlToTemplate(componentData.html, componentData.css);\r\n    // 同じクラスを登録できないため\r\n    const componentClass = class extends Component {\r\n      static template = template;\r\n      static ViewModel = componentData.ViewModel;\r\n    };\r\n    // nameにはハイフンが必要、アルファベットの大文字は使えません\r\n    customElements.define(name, componentClass);\r\n  }\r\n\r\n}\n\n//# sourceURL=webpack://quel/./src/component/Component.js?");

/***/ }),

/***/ "./src/component/Data.js":
/*!*******************************!*\
  !*** ./src/component/Data.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ createData)\n/* harmony export */ });\n/* harmony import */ var _thread_Notifier_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../thread/Notifier.js */ \"./src/thread/Notifier.js\");\n/* harmony import */ var _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../viewModel/Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _Component_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n\r\nclass Handler {\r\n  /**\r\n   * @type {{key:string,value:any}} \r\n   */\r\n  #data = {};\r\n  /**\r\n   * @type {Component}\r\n   */\r\n  #component;\r\n\r\n  #bindPropByThisProp = new Map();\r\n\r\n  get data() {\r\n    return (this.#component ? this.#component?.parentComponent?.viewModel : this.#data) ?? {};\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {{key:string,value:any}|Component} data \r\n   */\r\n  [_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_CALL_BIND_DATA](data) {\r\n    if (data instanceof _Component_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\r\n      this.#component = data;\r\n    } else {\r\n      this.#data = data;\r\n    }\r\n  }\r\n\r\n  [_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_CALL_BIND_PROPERTY](thisProp, bindProp, indexes) {\r\n    this.#bindPropByThisProp.set(thisProp, { bindProp,  indexes } );\r\n  }\r\n\r\n  get(target, prop, receiver) {\r\n    if (prop === _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_CALL_BIND_DATA) {\r\n      return (data) => Reflect.apply(this[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_CALL_BIND_DATA], this, [data]);\r\n    }\r\n    if (prop === _viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_CALL_BIND_PROPERTY) {\r\n      return (thisProp, bindProp) => Reflect.apply(this[_viewModel_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_CALL_BIND_PROPERTY], this, [thisProp, bindProp]);\r\n    }\r\n    const { data } = this;\r\n    const { bindProp, indexes } = this.#bindPropByThisProp.get(prop) ?? { bindProp:prop, indexes:[] };\r\n    return Reflect.get(data, bindProp, data);\r\n  }\r\n\r\n  set(target, prop, value, receiver) {\r\n    const { data } = this;\r\n    const { bindProp, indexes } = this.#bindPropByThisProp.get(prop) ?? { bindProp:prop, indexes:[] };\r\n    return Reflect.set(data, bindProp, value, data);\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Component} component \r\n * @returns \r\n */\r\nfunction createData(component) {\r\n  return new Proxy({}, new Handler(component));\r\n}\n\n//# sourceURL=webpack://quel/./src/component/Data.js?");

/***/ }),

/***/ "./src/export.js":
/*!***********************!*\
  !*** ./src/export.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _main_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main.js */ \"./src/main.js\");\n/* harmony import */ var _myname_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./myname.js */ \"./src/myname.js\");\n\r\n\r\n\r\nwindow[_myname_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]] = _main_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n\n//# sourceURL=webpack://quel/./src/export.js?");

/***/ }),

/***/ "./src/filter/Builtin.js":
/*!*******************************!*\
  !*** ./src/filter/Builtin.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"inputFilters\": () => (/* binding */ inputFilters),\n/* harmony export */   \"outputFilters\": () => (/* binding */ outputFilters)\n/* harmony export */ });\nclass outputFilters {\r\n  static localeString = (value, options) => (value != null) ? Number(value).toLocaleString() : null;\r\n  static fixed        = (value, options) => (value != null) ? Number(value).toFixed(options[0] ?? 0) : null;\r\n  static styleDisplay = (value, options) => value ? (options[0] ?? \"\") : \"none\";\r\n  static truthy       = (value, options) => value ? true : false;\r\n  static falsey       = (value, options) => !value ? true : false;\r\n  static not          = this.falsey;\r\n  static upperCase    = (value, options) => (value != null) ? String(value).toUpperCase() : null;\r\n  static lowerCase    = (value, options) => (value != null) ? String(value).toLowerCase() : null;\r\n  static eq           = (value, options) => value == options[0];\r\n  static ne           = (value, options) => value != options[0];\r\n  static lt           = (value, options) => Number(value) < Number(options[0]);\r\n  static le           = (value, options) => Number(value) <= Number(options[0]);\r\n  static gt           = (value, options) => Number(value) > Number(options[0]);\r\n  static ge           = (value, options) => Number(value) >= Number(options[0]);\r\n  static embed        = (value, options) => (value != null) ? decodeURI((options[0] ?? \"\").replaceAll(\"%s\", value)) : null;\r\n  static ifText       = (value, options) => value ? options[0] ?? null : options[1] ?? null;\r\n  static null         = (value, options) => (value == null) ? true : false;\r\n}\r\n\r\nclass inputFilters {\r\n  static number       = (value, options) => Number(value);\r\n  static boolean      = (value, options) => Boolean(value);\r\n}\n\n//# sourceURL=webpack://quel/./src/filter/Builtin.js?");

/***/ }),

/***/ "./src/filter/Filter.js":
/*!******************************!*\
  !*** ./src/filter/Filter.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Filter)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _Builtin_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Builtin.js */ \"./src/filter/Builtin.js\");\n\r\n\r\n\r\n// \"property:vmProperty|toFix,2|toLocaleString;\"\r\n// => toFix,2|toLocaleString\r\n\r\nclass Filter {\r\n  /**\r\n   * @type {string}\r\n   */\r\n  name;\r\n  /**\r\n   * @type {string[]}\r\n   */\r\n  options;\r\n\r\n  /**\r\n   * \r\n   * @param {any} value \r\n   * @param {Filter[]} filters \r\n   * @returns {any}\r\n   */\r\n  static applyForInput(value, filters) {\r\n    return filters.reduceRight((v, f) => (f.name in _Builtin_js__WEBPACK_IMPORTED_MODULE_1__.inputFilters) ? _Builtin_js__WEBPACK_IMPORTED_MODULE_1__.inputFilters[f.name](v, f.options) : v, value);\r\n  }\r\n  /**\r\n   * \r\n   * @param {any} value \r\n   * @param {Filter[]} filters \r\n   * @returns {any}\r\n   */\r\n  static applyForOutput(value, filters) {\r\n    return filters.reduce((v, f) => (f.name in _Builtin_js__WEBPACK_IMPORTED_MODULE_1__.outputFilters) ? _Builtin_js__WEBPACK_IMPORTED_MODULE_1__.outputFilters[f.name](v, f.options) : v, value);\r\n  }\r\n  /**\r\n   * \r\n   * @param {string} name \r\n   * @param {(value:any,options:string[])=>{}} outputFilter \r\n   * @param {(value:any,options:string[])=>{}} inputFilter \r\n   */\r\n  static regist(name, outputFilter, inputFilter) {\r\n    if (name in _Builtin_js__WEBPACK_IMPORTED_MODULE_1__.outputFilters) _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].raise(`regist filter error duplicate name (${name})`);\r\n    if (name in _Builtin_js__WEBPACK_IMPORTED_MODULE_1__.inputFilters) _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].raise(`regist filter error duplicate name (${name})`);\r\n    outputFilter && (_Builtin_js__WEBPACK_IMPORTED_MODULE_1__.outputFilters[name] = outputFilter);\r\n    inputFilter && (_Builtin_js__WEBPACK_IMPORTED_MODULE_1__.inputFilters[name] = inputFilter);\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://quel/./src/filter/Filter.js?");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Main)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component/Component.js */ \"./src/component/Component.js\");\n/* harmony import */ var _filter_Filter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filter/Filter.js */ \"./src/filter/Filter.js\");\n\r\n\r\n\r\n\r\nclass Main {\r\n  static #config = {\r\n    prefix: undefined,\r\n    debug: false,\r\n  };\r\n  /**\r\n   * \r\n   * @param {Object<string,UserComponentData>} components \r\n   * @returns {Main}\r\n   */\r\n  static components(components) {\r\n    const prefix = this.prefix;\r\n    Object.entries(components).forEach(([name, componentData]) => {\r\n      const componentName = prefix ? (prefix + \"-\" + name) : name;\r\n      _component_Component_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].regist(componentName, componentData);\r\n    });\r\n    return this;\r\n  }\r\n  /**\r\n   * \r\n   * @param {Object<string,UserFilterData>} filters \r\n   * @returns {Main}\r\n   */\r\n  static filters(filters) {\r\n    Object.entries(filters).forEach(([name, filterData]) => {\r\n      const { input, output } = filterData;\r\n      _filter_Filter_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].regist(name, output, input);\r\n    });\r\n    return this;\r\n  }\r\n  /**\r\n   * \r\n   * @param {{prefix:string,debug:boolean}}  \r\n   * @returns {Main}\r\n   */\r\n  static config({ prefix = undefined, debug = false }) {\r\n    this.#config = Object.assign(this.#config, { prefix, debug });\r\n    return this;\r\n  }\r\n  static get debug() {\r\n    return this.#config.debug;\r\n  }\r\n  static get prefix() {\r\n    return this.#config.prefix;\r\n  }\r\n}\n\n//# sourceURL=webpack://quel/./src/main.js?");

/***/ }),

/***/ "./src/myname.js":
/*!***********************!*\
  !*** ./src/myname.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst name = \"quel\";\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (name);\r\n\n\n//# sourceURL=webpack://quel/./src/myname.js?");

/***/ }),

/***/ "./src/node/PropertyType.js":
/*!**********************************!*\
  !*** ./src/node/PropertyType.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NodePropertyType\": () => (/* binding */ NodePropertyType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n\r\n\r\n\r\nconst PREFIX_EVENT = \"on\";\r\n\r\n/**\r\n * @enum {number}\r\n */\r\nconst NodePropertyType = {\r\n  levelTop: 1,\r\n  level2nd: 2,\r\n  level3rd: 3,\r\n  className: 10,\r\n  radio: 20,\r\n  checkbox: 30,\r\n  template: 90,\r\n  event: 91,\r\n  component: 92,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * \r\n   * @param {Node} node\r\n   * @param {string} nodeProperty \r\n   * @returns {{type:NodePropertyType,nodePropertyElements:string[],eventType:string}}\r\n   */\r\n  static getInfo(node, nodeProperty) {\r\n    const result = {type:null, nodePropertyElements:[], eventType:null};\r\n    if (node instanceof HTMLTemplateElement) { \r\n      result.type = NodePropertyType.template;\r\n      return result;\r\n    };\r\n\r\n    result.nodePropertyElements = nodeProperty.split(\".\");\r\n    if (node instanceof _component_Component_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) { \r\n      result.type = NodePropertyType.component;\r\n      return result;\r\n    };\r\n    if (result.nodePropertyElements.length === 1) {\r\n      if (result.nodePropertyElements[0].startsWith(PREFIX_EVENT)) {\r\n        result.type = NodePropertyType.event;\r\n        result.eventType = result.nodePropertyElements[0].slice(PREFIX_EVENT.length);\r\n      } else if (result.nodePropertyElements[0] === \"radio\") {\r\n        result.type = NodePropertyType.radio;\r\n      } else if (result.nodePropertyElements[1] === \"checkbox\") {\r\n        result.type = NodePropertyType.checkbox;\r\n      } else {\r\n        result.type = NodePropertyType.levelTop;\r\n      }\r\n    } else if (result.nodePropertyElements.length === 2) {\r\n      if (result.nodePropertyElements[0] === \"className\") {\r\n        result.type = NodePropertyType.className;\r\n      } else {\r\n        result.type = NodePropertyType.level2nd;\r\n      }\r\n    } else if (result.nodePropertyElements.length === 3) {\r\n      result.type = NodePropertyType.level3rd;\r\n    } else {\r\n      _utils_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].raise(`unknown property ${nodeProperty}`);\r\n    }\r\n    return result;\r\n  }\r\n});\r\n\r\n\n\n//# sourceURL=webpack://quel/./src/node/PropertyType.js?");

/***/ }),

/***/ "./src/thread/NodeUpdator.js":
/*!***********************************!*\
  !*** ./src/thread/NodeUpdator.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NodeUpdateData\": () => (/* binding */ NodeUpdateData),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Thread_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Thread.js */ \"./src/thread/Thread.js\");\n\r\n\r\nclass NodeUpdateData {\r\n  /**\r\n   * @type {Node}\r\n   */\r\n  node;\r\n  /**\r\n   * @type {string}\r\n   */\r\n  property;\r\n  /**\r\n   * @type {()=>{}}\r\n   */\r\n  updateFunc;\r\n\r\n  /**\r\n   * \r\n   * @param {Node} node \r\n   * @param {string} property \r\n   * @param {()=>{}} updateFunc \r\n   */\r\n  constructor(node, property, updateFunc) {\r\n    this.node = node;\r\n    this.property = property;\r\n    this.updateFunc = updateFunc;\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * @type {NodeUpdateData[]}\r\n   */\r\n  queue = [];\r\n\r\n  /**\r\n   * @type {import(\"./Thread.js\").UpdateSlotStatusCallback}\r\n   */\r\n  #statusCallback;\r\n  /**\r\n   * @param {import(\"./Thread.js\").UpdateSlotStatusCallback} statusCallback\r\n   */\r\n  constructor(statusCallback) {\r\n    this.#statusCallback = statusCallback;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {NodeUpdateData[]} updates \r\n   */\r\n  reorder(updates) {\r\n    updates.sort((update1, update2) => {\r\n      if (update2.node instanceof HTMLTemplateElement) return 1;\r\n      if (update1.node instanceof HTMLSelectElement && update1.property === \"value\") return 1;\r\n      return -1;\r\n    });\r\n    return updates;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  async exec() {\r\n    this.#statusCallback && this.#statusCallback(_Thread_js__WEBPACK_IMPORTED_MODULE_0__.UpdateSlotStatus.beginNodeUpdate);\r\n    try {\r\n      while(this.queue.length > 0) {\r\n        const updates = this.reorder(this.queue.splice(0));\r\n        updates.forEach(update => Reflect.apply(update.updateFunc, update, []));\r\n      }\r\n    } finally {\r\n      this.#statusCallback && this.#statusCallback(_Thread_js__WEBPACK_IMPORTED_MODULE_0__.UpdateSlotStatus.endNodeUpdate);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @type {boolean}\r\n   */\r\n  get isEmpty() {\r\n    return this.queue.length === 0;\r\n  }\r\n});\r\n\n\n//# sourceURL=webpack://quel/./src/thread/NodeUpdator.js?");

/***/ }),

/***/ "./src/thread/Notifier.js":
/*!********************************!*\
  !*** ./src/thread/Notifier.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NotifyData\": () => (/* binding */ NotifyData),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n/* harmony import */ var _Thread_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Thread.js */ \"./src/thread/Thread.js\");\n\r\n\r\n\r\nclass NotifyData {\r\n  /**\r\n   * @type {Component}\r\n   */\r\n  component;\r\n  /**\r\n   * @type {string}\r\n   */\r\n  name;\r\n  /**\r\n   * @type {number[]}\r\n   */\r\n  #indexes;\r\n  get indexes() {\r\n    return this.#indexes;\r\n  }\r\n  set indexes(value) {\r\n    this.#indexes = value;\r\n    this.#indexesString = value.toString();\r\n    this.#key = this.name + \"\\t\" + this.#indexesString;\r\n  }\r\n  /**\r\n   * @type {string}\r\n   */\r\n  #indexesString;\r\n  get indexesString() {\r\n    return this.#indexesString;\r\n  }\r\n  /**\r\n   * @type {string}\r\n   */\r\n  #key;\r\n  get key() {\r\n    return this.#key;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {Component} component\r\n   * @param {string} name \r\n   * @param {number[]} indexes \r\n   */\r\n  constructor(component, name, indexes) {\r\n    this.component = component;\r\n    this.name = name;\r\n    this.indexes = indexes;\r\n  }\r\n}\r\n\r\nconst getNnotifyKey = notify => notify.key;\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * @type {NotifyData[]}\r\n   */\r\n  queue = [];\r\n\r\n  /**\r\n   * @type {import(\"./Thread.js\").UpdateSlotStatusCallback}\r\n   */\r\n  #statusCallback;\r\n  /**\r\n   * @param {import(\"./Thread.js\").UpdateSlotStatusCallback} statusCallback\r\n   */\r\n  constructor(statusCallback) {\r\n    this.#statusCallback = statusCallback;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async exec() {\r\n    this.#statusCallback && this.#statusCallback(_Thread_js__WEBPACK_IMPORTED_MODULE_1__.UpdateSlotStatus.beginNotify);\r\n    try {\r\n      while(this.queue.length > 0) {\r\n        const notifies = this.queue.splice(0);\r\n        /**\r\n         * @type {Map<Component,NotifyData[]>}\r\n         */\r\n        const notifiesByComponent = notifies.reduce((map, notify) => {\r\n          map.get(notify.component)?.push(notify) ?? map.set(notify.component, [ notify ]);\r\n          return map;\r\n        }, new Map);\r\n        \r\n        for(const [component, notifies] of notifiesByComponent.entries()) {\r\n          const setOfKey = new Set(notifies.map(getNnotifyKey));\r\n          component.notify(setOfKey);\r\n        }\r\n      }\r\n    } finally {\r\n      this.#statusCallback && this.#statusCallback(_Thread_js__WEBPACK_IMPORTED_MODULE_1__.UpdateSlotStatus.endNotify);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @type {boolean}\r\n   */\r\n  get isEmpty() {\r\n    return this.queue.length === 0;\r\n  }\r\n});\r\n\n\n//# sourceURL=webpack://quel/./src/thread/Notifier.js?");

/***/ }),

/***/ "./src/thread/Processor.js":
/*!*********************************!*\
  !*** ./src/thread/Processor.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ProcessData\": () => (/* binding */ ProcessData),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Thread_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Thread.js */ \"./src/thread/Thread.js\");\n\r\n\r\nclass ProcessData {\r\n  /**\r\n   * @type {()=>{}}\r\n   */\r\n  target;\r\n  /**\r\n   * @type {Object}\r\n   */\r\n  thisArgument;\r\n  /**\r\n   * @type {any[]}\r\n   */\r\n  argumentsList;\r\n\r\n  /**\r\n   * \r\n   * @param {()=>{}} target \r\n   * @param {Object} thisArgument \r\n   * @param {any[]} argumentsList \r\n   */\r\n  constructor(target, thisArgument, argumentsList) {\r\n    this.target = target;\r\n    this.thisArgument = thisArgument;\r\n    this.argumentsList = argumentsList;\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * @type {ProcessData[]}\r\n   */\r\n  queue = [];\r\n\r\n  /**\r\n   * @type {import(\"./Thread.js\").UpdateSlotStatusCallback}\r\n   */\r\n  #statusCallback;\r\n  /**\r\n   * @param {import(\"./Thread.js\").UpdateSlotStatusCallback} statusCallback\r\n   */\r\n  constructor(statusCallback) {\r\n    this.#statusCallback = statusCallback;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async exec() {\r\n    this.#statusCallback && this.#statusCallback(_Thread_js__WEBPACK_IMPORTED_MODULE_0__.UpdateSlotStatus.beginProcess);\r\n    try {\r\n      while(this.queue.length > 0) {\r\n        const processes = this.queue.splice(0);\r\n        for(const process of processes) {\r\n          await Reflect.apply(process.target, process.thisArgument, process.argumentsList);\r\n        }\r\n      }\r\n    } finally {\r\n      this.#statusCallback && this.#statusCallback(_Thread_js__WEBPACK_IMPORTED_MODULE_0__.UpdateSlotStatus.endProcess);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @type {boolean}\r\n   */\r\n  get isEmpty() {\r\n    return this.queue.length === 0;\r\n  }\r\n});\n\n//# sourceURL=webpack://quel/./src/thread/Processor.js?");

/***/ }),

/***/ "./src/thread/Thread.js":
/*!******************************!*\
  !*** ./src/thread/Thread.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"UpdateSlot\": () => (/* binding */ UpdateSlot),\n/* harmony export */   \"UpdateSlotStatus\": () => (/* binding */ UpdateSlotStatus),\n/* harmony export */   \"default\": () => (/* binding */ Thread)\n/* harmony export */ });\n/* harmony import */ var _main_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main.js */ \"./src/main.js\");\n/* harmony import */ var _NodeUpdator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NodeUpdator.js */ \"./src/thread/NodeUpdator.js\");\n/* harmony import */ var _Notifier_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Notifier.js */ \"./src/thread/Notifier.js\");\n/* harmony import */ var _Processor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Processor.js */ \"./src/thread/Processor.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @enum {number}\r\n */\r\nconst UpdateSlotStatus = {\r\n  beginProcess: 1,\r\n  endProcess: 2,\r\n  beginNotify: 3,\r\n  endNotify: 4,\r\n  beginNodeUpdate: 5,\r\n  endNodeUpdate: 6,\r\n};\r\n\r\n/**\r\n * @typedef {(status:UpdateSlotStatus)=>{}} UpdateSlotStatusCallback\r\n */\r\n\r\n\r\nclass UpdateSlot {\r\n  /**\r\n   * @type {Processor}\r\n   */\r\n  #processor;\r\n  /**\r\n   * @type {Notifier}\r\n   */\r\n  #notifier;\r\n  /**\r\n   * @type {NodeUpdator}\r\n   */\r\n  #nodeUpdator;\r\n  /**\r\n   * @type {()=>{}}\r\n   */\r\n  #callback;\r\n  /**\r\n   * @type {Promise}\r\n   */\r\n  #promise;\r\n  /**\r\n   * @type {(value) => {}}\r\n   */\r\n  #resolve;\r\n  /**\r\n   * @type {() => {}}\r\n   */\r\n  #reject;\r\n  \r\n  /**\r\n   * \r\n   * @param {()=>{}?} callback\r\n   * @param {UpdateSlotStatusCallback?} statusCallback\r\n   */\r\n  constructor(callback = null, statusCallback = null) {\r\n    this.#processor = new _Processor_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](statusCallback);\r\n    this.#notifier = new _Notifier_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](statusCallback);\r\n    this.#nodeUpdator = new _NodeUpdator_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](statusCallback);\r\n    this.#callback = callback;\r\n    this.#promise = new Promise((resolve, reject) => {\r\n      this.#resolve = resolve;\r\n      this.#reject = reject;\r\n    })\r\n  }\r\n\r\n  resolve() {\r\n    this.#resolve && this.#resolve();\r\n    this.#resolve = null;\r\n  }\r\n\r\n  reject() {\r\n    this.#reject && this.#reject();\r\n    this.#reject = null;\r\n  }\r\n\r\n  async waiting() {\r\n    return this.#promise;\r\n  }\r\n\r\n  async exec() {\r\n    do {\r\n      await this.#processor.exec();\r\n      await this.#notifier.exec();\r\n      await this.#nodeUpdator.exec();\r\n    } while(!this.#processor.isEmpty || !this.#notifier.isEmpty || !this.#nodeUpdator.isEmpty);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {ProcessData} processData \r\n   */\r\n  addProcess(processData) {\r\n    this.#processor.queue.push(processData);\r\n    this.resolve();\r\n  }\r\n  \r\n  /**\r\n   * \r\n   * @param {NotifyData} notifyData \r\n   */\r\n  addNotify(notifyData) {\r\n    this.#notifier.queue.push(notifyData);\r\n    this.resolve();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {NodeUpdateData} nodeUpdateData \r\n   */\r\n  addNodeUpdate(nodeUpdateData) {\r\n    this.#nodeUpdator.queue.push(nodeUpdateData);\r\n    this.resolve();\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  callback() {\r\n    this.#callback && this.#callback();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {()=>{}} callback \r\n   * @param {UpdateSlotStatusCallback} statusCallback \r\n   * @returns \r\n   */\r\n  static create(callback, statusCallback) {\r\n    return new UpdateSlot(callback, statusCallback);\r\n  }\r\n\r\n}\r\n\r\nclass Thread {\r\n  /**\r\n   * @type {(value:any)=>{}}\r\n   */\r\n  #resolve;\r\n  /**\r\n   * @type {()=>{}}\r\n   */\r\n  #reject;\r\n\r\n  /**\r\n   * \r\n   */\r\n  constructor() {\r\n    this.main();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns {Promise<UpdateSlot>}\r\n   */\r\n  async #sleep() {\r\n    return new Promise((resolve, reject) => {\r\n      this.#resolve = resolve;\r\n      this.#reject = reject;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  stop() {\r\n    this.#reject();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {UpdateSlot} slot \r\n   */\r\n  wakeup(slot) {\r\n    this.#resolve(slot);\r\n  }\r\n\r\n  async main() {\r\n    do {\r\n      try {\r\n        const slot = await this.#sleep();\r\n        await slot.waiting(); // queueにデータが入るまで待機\r\n        _main_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debug && performance.mark('slot-exec:start');\r\n        try {\r\n          await slot.exec();\r\n          if (_main_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debug) {\r\n            performance.mark('slot-exec:end')\r\n            performance.measure('slot-exec', 'slot-exec:start', 'slot-exec:end');\r\n            console.log(performance.getEntriesByType(\"measure\"));    \r\n            performance.clearMeasures();\r\n            performance.clearMarks();\r\n          }\r\n        } finally {\r\n          slot.callback();\r\n        }\r\n      } catch(e) {\r\n        if (typeof e !== \"undefined\") {\r\n          console.error(e);\r\n          if (!confirm(\"致命的なエラーが発生しました。続行しますか？\")) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    } while(true);\r\n  }\r\n\r\n}\r\n\n\n//# sourceURL=webpack://quel/./src/thread/Thread.js?");

/***/ }),

/***/ "./src/types.js":
/*!**********************!*\
  !*** ./src/types.js ***!
  \**********************/
/***/ (() => {

eval("/**\r\n * @typedef {{html?:string,css?:string,ViewModel:class,template?:HTMLTemplateElement}} UserComponentData\r\n * \r\n * @typedef {(value:any,options:string[])=>{return:any}} FilterFunc\r\n * \r\n * @typedef {{input:FilterFunc,output:FilterFunc}} UserFilterData\r\n * \r\n * @typedef {Object<string,any>} ViewModel \r\n */\n\n//# sourceURL=webpack://quel/./src/types.js?");

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * \r\n   * @param {string} message \r\n   */\r\n  static raise(message) {\r\n    throw message;\r\n  }\r\n\r\n  /**\r\n   * 関数かどうかをチェック\r\n   * @param {any} obj \r\n   * @returns {boolean}\r\n   */\r\n  static isFunction = (obj) => {\r\n    const toString = Object.prototype.toString;\r\n    const text = toString.call(obj).slice(8, -1).toLowerCase();\r\n    return (text === \"function\" || text === \"asyncfunction\");\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {HTMLElement} element \r\n   * @returns {boolean}\r\n   */\r\n  static isInputableElement(element) {\r\n    return element instanceof HTMLSelectElement || element instanceof HTMLTextAreaElement || \r\n      (element instanceof HTMLInputElement && element.type !== \"button\");\r\n  }\r\n\r\n});\n\n//# sourceURL=webpack://quel/./src/utils.js?");

/***/ }),

/***/ "./src/viewModel/Accessor.js":
/*!***********************************!*\
  !*** ./src/viewModel/Accessor.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _PropertyInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PropertyInfo.js */ \"./src/viewModel/PropertyInfo.js\");\n\r\n\r\n\r\n\r\n\r\nconst notPrivate = property => property[0] !== \"_\";\r\nconst DEPENDENT_PROP = \"$dependentProps\";\r\n\r\n/**\r\n * \r\n * @param {{prop:string,refProps:string[]}[]} dependentProps\r\n * @returns \r\n */\r\nfunction createDependentMap(dependentProps) {\r\n  const map = new Map();\r\n  Object.entries(dependentProps).forEach(([prop, refProps]) => {\r\n    refProps.forEach(refProp => {\r\n      map.get(refProp)?.push(prop) ?? map.set(refProp, [ prop ]);\r\n    }) \r\n  });\r\n  return map;\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * \r\n   * @param {Component} component\r\n   * @param {ViewModel} viewModel \r\n   * @returns {{viewmodel:ViewModel, definedProperties:PropertyInfo[], dependentMap:Map<string,string[]>}}\r\n   */\r\n  static convert(component, viewModel) {\r\n    let dependentMap = new Map;\r\n    // $dependentPropsを取得\r\n    if (DEPENDENT_PROP in viewModel) {\r\n      const desc = Object.getOwnPropertyDescriptor(viewModel, DEPENDENT_PROP);\r\n      desc.enumerable = false;\r\n      Object.defineProperty(viewModel, DEPENDENT_PROP, desc);\r\n      dependentMap = createDependentMap(desc.value);\r\n    }\r\n    // プライベートプロパティを列挙不可にする\r\n    for(const [prop, desc] of Object.entries(Object.getOwnPropertyDescriptors(viewModel))) {\r\n      if (notPrivate(prop)) continue;\r\n      desc.enumerable = false;\r\n      Object.defineProperty(viewModel, prop, desc);\r\n    }\r\n\r\n    // 普通のプロパティをgetter/setter化する\r\n    const accessorProperties = \r\n      Object.keys(viewModel).filter(notPrivate).map(property => _PropertyInfo_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create(property));\r\n\r\n    accessorProperties.forEach(property => {\r\n      const value = viewModel[property.name];\r\n      delete viewModel[property.name];\r\n      const desc = property.createPropertyDescriptor(component);\r\n      Object.defineProperty(viewModel, property.name, desc);\r\n\r\n      if (!(property.privateName in viewModel)) {\r\n        const privateDesc = {\r\n          value,\r\n          writable: true, \r\n          enumerable: false, \r\n          configurable: true,\r\n        }\r\n        Object.defineProperty(viewModel, property.privateName, privateDesc);\r\n      }\r\n    });\r\n\r\n    // getterを列挙可にする\r\n    for(const [prop, desc] of Object.entries(Object.getOwnPropertyDescriptors(Object.getPrototypeOf(viewModel)))) {\r\n      if (prop === \"constructor\") continue;\r\n      if (_utils_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isFunction(desc.value)) continue;\r\n      desc.enumerable = true;\r\n      Object.defineProperty(viewModel, prop, desc);\r\n    }\r\n    const definedProperties = Object.keys(viewModel).map(prop => _PropertyInfo_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create(prop));\r\n\r\n    // definedPropertiesからdependentMapに追加\r\n    definedProperties.forEach(property => {\r\n      if (property.isPrimitive) return;\r\n      //if (property.lastElement === \"*\") return;\r\n      const props = dependentMap.get(property.parentName)?.concat(property.name) ?? [ property.name ];\r\n      dependentMap.set(property.parentName, props);\r\n    });\r\n\r\n    return { viewModel, definedProperties, dependentMap };\r\n\r\n  }\r\n});\n\n//# sourceURL=webpack://quel/./src/viewModel/Accessor.js?");

/***/ }),

/***/ "./src/viewModel/ArrayProxy.js":
/*!*************************************!*\
  !*** ./src/viewModel/ArrayProxy.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n/* harmony import */ var _thread_Notifier_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../thread/Notifier.js */ \"./src/thread/Notifier.js\");\n/* harmony import */ var _thread_Processor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../thread/Processor.js */ \"./src/thread/Processor.js\");\n/* harmony import */ var _PropertyInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PropertyInfo.js */ \"./src/viewModel/PropertyInfo.js\");\n/* harmony import */ var _Symbols_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Symbols.js */ \"./src/viewModel/Symbols.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * 配列プロキシ\r\n * 更新（追加・削除）があった場合、更新通知を送る機能を付加する\r\n */\r\nclass ArrayHandler {\r\n  /**\r\n   * @type {Component}\r\n   */\r\n  #component;\r\n  /**\r\n   * @type {PropertyInfo}\r\n   */\r\n  #prop;\r\n  /**\r\n   * ループインデックス\r\n   * @type {number[]}\r\n   */\r\n  #indexes;\r\n  /**\r\n   * コンストラクタ\r\n   * @param {Component} component \r\n   * @param {string} prop \r\n   * @param {number[]} indexes\r\n   */\r\n  constructor(component, prop, indexes) {\r\n    this.#component = component;\r\n    this.#prop = prop;\r\n    this.#indexes = indexes;\r\n  }\r\n\r\n  /**\r\n   * getter\r\n   * SymIsProxyはtrueを返す\r\n   * SymRawは元の配列を返す\r\n   * @param {Array} target Array\r\n   * @param {string} prop プロパティ\r\n   * @param {Proxy} receiver 配列プロキシ\r\n   * @returns \r\n   */\r\n  get(target, prop, receiver) {\r\n    if (prop === _Symbols_js__WEBPACK_IMPORTED_MODULE_4__.SYM_GET_IS_PROXY) return true;\r\n    if (prop === _Symbols_js__WEBPACK_IMPORTED_MODULE_4__.SYM_GET_RAW) return target;\r\n    return Reflect.get(target, prop, receiver);\r\n  }\r\n\r\n  /**\r\n   * setter\r\n   * lengthプロパティの場合、変更通知を送信する\r\n   * $onwriteを呼び出したいので、viewModelのプロパティに値をセットする\r\n   * @param {Object} target Array\r\n   * @param {string} prop プロパティ\r\n   * @param {Any} value \r\n   * @param {Proxy} receiver 配列プロキシ\r\n   * @returns \r\n   */\r\n  set(target, prop, value, receiver) {\r\n    Reflect.set(target, prop, value, receiver);\r\n    if (prop === \"length\") {\r\n      const component = this.#component;\r\n      const viewModel = component.viewModel;\r\n      const propName = this.#prop.name;\r\n      component.updateSlot.addProcess(new _thread_Processor_js__WEBPACK_IMPORTED_MODULE_2__.ProcessData(() => {\r\n        viewModel[propName] = target;\r\n      }, viewModel, []));\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Array<any>} array \r\n * @param {Component} component \r\n * @param {PropertyInfo} prop \r\n * @param {number[]} indexes \r\n * @returns \r\n */\r\nfunction create(array, component, prop, indexes) {\r\n  return new Proxy(array, new ArrayHandler(component, prop, indexes))\r\n}\r\n\n\n//# sourceURL=webpack://quel/./src/viewModel/ArrayProxy.js?");

/***/ }),

/***/ "./src/viewModel/Cache.js":
/*!********************************!*\
  !*** ./src/viewModel/Cache.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _PropertyInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PropertyInfo.js */ \"./src/viewModel/PropertyInfo.js\");\n\r\n\r\n/**\r\n * キャッシュのキーは、プロパティとインデックス\r\n */\r\n\r\nclass CacheValue {\r\n  /**\r\n   * @type { boolean }\r\n   */\r\n  dirty = false;\r\n  /**\r\n   * @type { any }\r\n   */\r\n  value;\r\n  /**\r\n   * @type {boolean}\r\n   */\r\n  updated;\r\n\r\n  /**\r\n   * \r\n   * @param {any} value \r\n   */\r\n  constructor(value, updated) {\r\n    this.value = value;\r\n    this.updated = updated;\r\n  }\r\n}\r\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {\r\n  /**\r\n   * @type {Map<PropertyInfo,Map<string,CacheValue>>}\r\n   */\r\n  #cacheValueByIndexesByProp = new Map();\r\n  /**\r\n   * @type {PropertyInfo[]}\r\n   */\r\n  #definedProperties;\r\n  /**\r\n   * @type {Map<string,PropertyInfo[]>}\r\n   */\r\n  #definedPropertiesByParentName;\r\n\r\n  /**\r\n   * \r\n   * @param {PropertyInfo[]} definedProperties \r\n   */\r\n  constructor(definedProperties) {\r\n    this.#definedProperties = definedProperties;\r\n    this.#definedPropertiesByParentName = definedProperties\r\n    .filter(definedProperty => definedProperty.parentName !== \"\")\r\n    .reduce((map, definedProperty) => {\r\n      map.get(definedProperty.parentName)?.push(definedProperty) ??\r\n      map.set(definedProperty.parentName, [ definedProperty ]);\r\n      return map;\r\n    }, new Map);\r\n\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {PropertyInfo} property \r\n   * @param {number[]} indexes \r\n   * @returns {any}\r\n   */\r\n  get(property, indexes) {\r\n    const cacheValue = this.#cacheValueByIndexesByProp.get(property)?.get(indexes.toString());\r\n    return cacheValue ? (!cacheValue.dirty ? cacheValue.value : undefined) : undefined;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {PropertyInfo} property \r\n   * @param {number[]} indexes \r\n   * @param {any} value \r\n   * @param {boolean} updated\r\n   */\r\n  set(property, indexes, value, updated) {\r\n    if (this.#definedPropertiesByParentName.has(property.name)) {\r\n      this.delete(property, indexes);\r\n    }\r\n    let cacheValueByIndexes = this.#cacheValueByIndexesByProp.get(property);\r\n    if (typeof cacheValueByIndexes === \"undefined\") {\r\n      cacheValueByIndexes = new Map();\r\n      this.#cacheValueByIndexesByProp.set(property, cacheValueByIndexes);\r\n    }\r\n    cacheValueByIndexes.set(indexes.toString(), new CacheValue(value, updated));\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {PropertyInfo} property \r\n   * @param {number[]} indexes \r\n   * @returns {boolean}\r\n   */\r\n  has(property, indexes) {\r\n    const cacheValue = this.#cacheValueByIndexesByProp.get(property)?.get(indexes.toString());\r\n    return cacheValue ? (!cacheValue.dirty) : false;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {PropertyInfo} property \r\n   * @param {number[]} indexes \r\n   */\r\n  delete(property, indexes) {\r\n    const indexesString = indexes.slice(0, property.loopLevel).toString();\r\n    const indexesStarts = indexesString + \",\";\r\n    let cacheValueByIndexes = this.#cacheValueByIndexesByProp.get(property);\r\n    if (cacheValueByIndexes) {\r\n      for(const indexes of cacheValueByIndexes.keys()) {\r\n        if (indexesString === \"\" || indexes === indexesString || indexes.startsWith(indexesStarts)) {\r\n          cacheValueByIndexes.get(indexes).dirty = true;\r\n        }\r\n      }\r\n    }\r\n    // 関連するキャッシュを取得し、削除する\r\n    /**\r\n     * \r\n     * @param {PropertyInfo} property \r\n     * @returns {PropertyInfo[]}\r\n     */\r\n    const getDependentProps = property => this.#definedProperties\r\n        .filter(prop => !prop.isPrimitive && prop.parentName === property.name)\r\n        .flatMap(prop => [prop].concat(getDependentProps(prop)));\r\n    const dependentProps = getDependentProps(property);\r\n    dependentProps.forEach(property => {\r\n      const cacheValueByIndexes = this.#cacheValueByIndexesByProp.get(property);\r\n      if (typeof cacheValueByIndexes === \"undefined\") return;\r\n      for(const indexes of cacheValueByIndexes.keys()) {\r\n        if (indexesString === \"\" || indexes === indexesString || indexes.startsWith(indexesStarts)) {\r\n          cacheValueByIndexes.get(indexes).dirty = true;;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  clear() {\r\n    this.#cacheValueByIndexesByProp.clear();\r\n  }\r\n\r\n  clearNoUpdated() {\r\n    for(const [ key, cacheValueByIndexes ] of this.#cacheValueByIndexesByProp.entries()) {\r\n      for(const [ indexes, cacheValue ] of cacheValueByIndexes.entries()) {\r\n        if (!cacheValue.dirty && !cacheValue.updated) {\r\n          cacheValue.dirty = true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n});\n\n//# sourceURL=webpack://quel/./src/viewModel/Cache.js?");

/***/ }),

/***/ "./src/viewModel/PropertyInfo.js":
/*!***************************************!*\
  !*** ./src/viewModel/PropertyInfo.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PropertyInfo)\n/* harmony export */ });\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n/* harmony import */ var _Symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_2__);\n\r\n\r\n\r\n\r\nclass PropertyInfo {\r\n\r\n  name;\r\n  elements;\r\n  loopLevel;\r\n  parentName;\r\n  lastElement;\r\n  regexp;\r\n  isPrimitive;\r\n  privateName;\r\n  isObject;\r\n  isLoop;\r\n  isNotPrimitive;\r\n\r\n  constructor(name) {\r\n    this.name = name;\r\n    this.elements = name.split(\".\");\r\n    this.loopLevel = this.elements.reduce((count, element) => count + ((element === \"*\") ? 1 : 0), 0);\r\n    this.parentName = this.elements.slice(0, -1).join(\".\");\r\n    this.lastElement = this.elements.at(-1) ?? null;\r\n    this.regexp = (this.loopLevel > 0) ? new RegExp(\"^\" + name.replaceAll(\"*\", \"(\\\\w+)\").replaceAll(\".\", \"\\\\.\") + \"$\") : null;\r\n    this.isPrimitive = this.elements.length === 1 && this.loopLevel === 0;\r\n    this.privateName = this.isPrimitive ? (\"_\" + name) : null;\r\n    this.isObject = this.elements.length > 1 && this.loopLevel === 0;\r\n    this.isLoop = this.elements.length > 1 && this.loopLevel > 0;\r\n    this.isNotPrimitive = ! this.isPrimitive ;\r\n  }\r\n  get parentProperty() {\r\n    return PropertyInfo.create(this.parentName);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {ViewModel} viewModel \r\n   * @returns \r\n   */\r\n  primitiveGetter(viewModel) {\r\n    return viewModel[this.privateName];\r\n  }\r\n  /**\r\n   * \r\n   * @param {ViewModel} viewModel \r\n   * @param {any} value \r\n   * @returns \r\n   */\r\n  primitiveSetter(viewModel, value) {\r\n    viewModel[this.privateName] = value;\r\n    return true;\r\n  }\r\n  /**\r\n   * \r\n   * @param {ViewModel} viewModel \r\n   * @returns \r\n   */\r\n  nonPrimitiveGetter(viewModel) {\r\n    const { parentName, loopLevel, lastElement } = this;\r\n    const index = (lastElement === \"*\") ? viewModel[_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_GET_INDEXES][loopLevel - 1] : lastElement;\r\n    return viewModel[parentName][index];\r\n  }\r\n  /**\r\n   * \r\n   * @param {ViewModel} viewModel \r\n   * @param {any} value \r\n   * @returns \r\n   */\r\n  nonPrimitiveSetter(viewModel, value) {\r\n    const { parentName, loopLevel, lastElement } = this;\r\n    const index = (lastElement === \"*\") ? viewModel[_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_GET_INDEXES][loopLevel - 1] : lastElement;\r\n    viewModel[parentName][index] = value;\r\n    return true;\r\n  }\r\n  /**\r\n   * \r\n   * @param {Component} component \r\n   * @returns {PropertyDescriptor}\r\n   */\r\n  createPropertyDescriptor(component) {\r\n    return {\r\n      get : this.isPrimitive ?\r\n        () => Reflect.apply(this.primitiveGetter, this, [component.viewModel]) : \r\n        () => Reflect.apply(this.nonPrimitiveGetter, this, [component.viewModel]),\r\n      set : this.isPrimitive ?\r\n        value => Reflect.apply(this.primitiveSetter, this, [component.viewModel, value]) : \r\n        value => Reflect.apply(this.nonPrimitiveSetter, this, [component.viewModel, value]),\r\n      enumerable: true, \r\n      configurable: true,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {ViewModel} viewModel \r\n   * @param {number[]} indexes \r\n   * @returns {number[][]}\r\n   */\r\n  expand(viewModel, indexes) {\r\n    if (this.loopLevel === indexes.length) {\r\n      return [ indexes ];\r\n    } else if (this.loopLevel < indexes.length) {\r\n      return [ indexes.slice(0, this.loopLevel) ];\r\n    } else {\r\n      /**\r\n       * \r\n       * @param {string} parentName \r\n       * @param {number} elementIndex \r\n       * @param {number[]} loopIndexes \r\n       * @returns {number[][]}\r\n       */\r\n      const traverse = (parentName, elementIndex, loopIndexes) => {\r\n        const parentNameDot = parentName !== \"\" ? (parentName + \".\") : parentName;\r\n        const element = this.elements[elementIndex];\r\n        const isTerminate = (this.elements.length - 1) === elementIndex;\r\n        let retValues;\r\n        if (element === \"*\") {\r\n          if (loopIndexes.length < indexes.length) {\r\n            retValues = isTerminate ? [ indexes.slice(0, loopIndexes.length + 1) ] :\r\n              traverse(parentNameDot + element, elementIndex + 1, indexes.slice(0, loopIndexes.length + 1));\r\n          } else {\r\n            retValues = (viewModel[_Symbols_js__WEBPACK_IMPORTED_MODULE_1__.SYM_CALL_DIRECT_GET](parentName, loopIndexes) ?? []).flatMap((value, index) => {\r\n              return isTerminate ? loopIndexes.concat(index) :\r\n                traverse(parentNameDot + element, elementIndex + 1, loopIndexes.concat(index));\r\n            })\r\n          }\r\n        } else {\r\n          retValues = isTerminate ? [ loopIndexes ] : \r\n           traverse(parentNameDot + element, elementIndex + 1, loopIndexes);\r\n        }\r\n        return retValues;\r\n\r\n      };\r\n      const listOfIndexes = traverse(\"\", 0, []);\r\n      return listOfIndexes;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * @type {Map<string,PropertyInfo>}\r\n   */\r\n  static #propertyInfoByProp = new Map;\r\n  static create(prop) {\r\n    let propertyInfo = this.#propertyInfoByProp.get(prop);\r\n    if (typeof propertyInfo === \"undefined\") {\r\n      propertyInfo = new PropertyInfo(prop);\r\n      this.#propertyInfoByProp.set(prop, propertyInfo);\r\n    }\r\n    return propertyInfo;\r\n  }\r\n  \r\n}\n\n//# sourceURL=webpack://quel/./src/viewModel/PropertyInfo.js?");

/***/ }),

/***/ "./src/viewModel/Proxy.js":
/*!********************************!*\
  !*** ./src/viewModel/Proxy.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../main.js */ \"./src/main.js\");\n/* harmony import */ var _Symbols_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Symbols.js */ \"./src/viewModel/Symbols.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n/* harmony import */ var _Accessor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Accessor.js */ \"./src/viewModel/Accessor.js\");\n/* harmony import */ var _PropertyInfo_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PropertyInfo.js */ \"./src/viewModel/PropertyInfo.js\");\n/* harmony import */ var _thread_Processor_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../thread/Processor.js */ \"./src/thread/Processor.js\");\n/* harmony import */ var _thread_Notifier_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../thread/Notifier.js */ \"./src/thread/Notifier.js\");\n/* harmony import */ var _Cache_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Cache.js */ \"./src/viewModel/Cache.js\");\n/* harmony import */ var _ArrayProxy_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ArrayProxy.js */ \"./src/viewModel/ArrayProxy.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst MAX_INDEXES_LEVEL = 8;\r\nconst CONTEXT_INDEXES = new Set(\r\n  [...Array(MAX_INDEXES_LEVEL)].map((content,index) => \"$\" + (index + 1))   \r\n);\r\nconst CONTEXT_COMPONENT = \"$component\";\r\nconst CONTEXT_DATA = \"$data\";\r\nconst CONTEXT_OPEN_DIALOG = \"$openDialog\";\r\nconst CONTEXT_CLOSE_DIALOG = \"$closeDialog\";\r\nconst CONTEXT_NOTIFY = \"$notify\";\r\n\r\n/**\r\n * 配列プロキシを取得\r\n * 配列プロキシのプロキシといった重複をさけるため、\r\n * いったん元の配列を求めてからプロキシにする\r\n * @param {Component} component \r\n * @param {PropertyInfo} prop \r\n * @param {number[]} indexes\r\n * @param {any} value \r\n * @returns \r\n */\r\nconst wrapArray = (component, prop, indexes, value) => {\r\n  value = value?.[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_GET_IS_PROXY] ? value[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_GET_RAW] : value;\r\n  return (value instanceof Array) ? (0,_ArrayProxy_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(value, component, prop, indexes) : value;\r\n}\r\n\r\nclass Handler {\r\n  /**\r\n   * @type {Cache}\r\n   */\r\n  cache;\r\n  /**\r\n   * @type {Map<string,{indexes:number[],propertyInfo:PropertyInfo}>}\r\n   */\r\n  propertyInfoAndIndexesByProp = new Map();\r\n  /**\r\n   * @type {number[][]}\r\n   */\r\n  stackIndexes = [];\r\n  /**\r\n   * @type {Component}\r\n   */\r\n  component;\r\n  /**\r\n   * @type {Map<string,PropertyInfo>}\r\n   */\r\n  definedPropertyByProp = new Map;\r\n  /**\r\n   * @type {PropertyInfo[]}\r\n   */\r\n  loopProperties = [];\r\n\r\n  /**\r\n   * @type {Map<string,string[]>}\r\n   */\r\n  dependentMap;\r\n  /**\r\n   * \r\n   * @param {Component} component \r\n   * @param {PropertyInfo[]} definedProperties\r\n   * @param {Map<string,string[]>} dependentMap\r\n   */\r\n  constructor(component, definedProperties, dependentMap) {\r\n    this.component = component;\r\n    this.definedPropertyByProp = new Map(definedProperties.map(property => ([property.name, property])));\r\n    this.loopProperties = definedProperties.filter(property => property.isLoop);\r\n    this.dependentMap = dependentMap;\r\n    this.cache = new _Cache_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"](definedProperties);\r\n  }\r\n\r\n  get lastIndexes() {\r\n    return this.stackIndexes[this.stackIndexes.length - 1] ?? [];\r\n  }\r\n\r\n  async [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_INIT](target, receiver) {\r\n    if (!(\"$oninit\" in target)) return;\r\n    return await Reflect.apply(target[\"$oninit\"], receiver, []);\r\n  }\r\n\r\n  async [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CONNECT](target, receiver) {\r\n    if (!(\"$onconnect\" in target)) return;\r\n    return await Reflect.apply(target[\"$onconnect\"], receiver, []);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} prop \r\n   * @param {number[]} indexes \r\n   * @param {*} target \r\n   * @param {*} receiver \r\n   */\r\n  [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_WRITE](prop, indexes, target, receiver) {\r\n    if (\"$onwrite\" in target) {\r\n      const { component } = this;\r\n      const process = new _thread_Processor_js__WEBPACK_IMPORTED_MODULE_6__.ProcessData(target[\"$onwrite\"], receiver, [ prop, indexes ]);\r\n      component.updateSlot.addProcess(process);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {ViewModel} target \r\n   * @param {PropertyInfo} prop \r\n   * @param {Proxy<ViewModel>} receiver \r\n   */\r\n  #getDefinedPropertyValue(target, prop, receiver) {\r\n    const { component, lastIndexes, cache } = this;\r\n    const indexes = lastIndexes.slice(0, prop.loopLevel);\r\n    const cacheValue = cache.get(prop, indexes);\r\n    if (typeof cacheValue !== \"undefined\") return wrapArray(component, prop, indexes, cacheValue);\r\n    const value = Reflect.get(target, prop.name, receiver);\r\n    cache.set(prop, indexes, value, false);\r\n    return wrapArray(component, prop, indexes, value);\r\n  }\r\n\r\n  [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](prop, indexes, target, receiver) {\r\n    let value;\r\n    this.stackIndexes.push(indexes);\r\n    try {\r\n      value = receiver[prop];\r\n    } finally {\r\n      this.stackIndexes.pop();\r\n    }\r\n    return value;\r\n  }\r\n\r\n  [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_NOTIFY_FOR_DEPENDENT_PROPS](propertyName, indexes, target, receiver) {\r\n    const { dependentMap, definedPropertyByProp, component } = this;\r\n    if (dependentMap.has(propertyName)) {\r\n      /**\r\n       * \r\n       * @param {Set<string>} setOfProperties \r\n       * @param {string} propertyName \r\n       */\r\n      const getDependentProps = (setOfProperties, propertyName) => {\r\n        (dependentMap.get(propertyName) ?? []).forEach(refPropertyName => {\r\n          if (!setOfProperties.has(refPropertyName)) {\r\n            setOfProperties.add(refPropertyName);\r\n            getDependentProps(setOfProperties, refPropertyName);\r\n          }\r\n        });\r\n        return setOfProperties;\r\n      };\r\n      const dependentPropNames = getDependentProps(new Set, propertyName);\r\n      dependentPropNames.forEach(dependentPropName => {\r\n        const definedProperty = definedPropertyByProp.get(dependentPropName);\r\n        if (indexes.length < definedProperty.loopLevel) {\r\n          const listOfIndexes = definedProperty.expand(receiver, indexes);\r\n          listOfIndexes.forEach(depIndexes => {\r\n            component.updateSlot.addNotify(new _thread_Notifier_js__WEBPACK_IMPORTED_MODULE_7__.NotifyData(component, definedProperty.name, depIndexes));\r\n          });\r\n        } else {\r\n          const depIndexes = indexes.slice(0, definedProperty.loopLevel);\r\n          component.updateSlot.addNotify(new _thread_Notifier_js__WEBPACK_IMPORTED_MODULE_7__.NotifyData(component, definedProperty.name, depIndexes));\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param {ViewModel} target \r\n   * @param {PropertyInfo} prop \r\n   * @param {any} value \r\n   * @param {Proxy<ViewModel>} receiver \r\n   */\r\n  #setDefinedPropertyValue(target, prop, value, receiver) {\r\n    const { component, lastIndexes, cache } = this;\r\n    value = value?.[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_GET_IS_PROXY] ? value[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_GET_RAW] : value;\r\n    const indexes = lastIndexes.slice(0, prop.loopLevel);\r\n    Reflect.set(target, prop.name, value, receiver);\r\n    cache.set(prop, indexes, value, true);\r\n    component.updateSlot.addNotify(new _thread_Notifier_js__WEBPACK_IMPORTED_MODULE_7__.NotifyData(component, prop.name, indexes));\r\n\r\n    this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_NOTIFY_FOR_DEPENDENT_PROPS](prop.name, indexes, target, receiver);\r\n\r\n    this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_WRITE](prop.name, lastIndexes, target, receiver);\r\n\r\n    return true;\r\n  }\r\n\r\n  [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](prop, indexes, value, target, receiver) {\r\n    this.stackIndexes.push(indexes);\r\n    try {\r\n      receiver[prop] = value;\r\n    } finally {\r\n      this.stackIndexes.pop();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  async [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_CALL](prop, indexes, event, target, receiver) {\r\n    this.stackIndexes.push(indexes);\r\n    try {\r\n      await Reflect.apply(target[prop], receiver, [event, ...indexes]);\r\n    } finally {\r\n      this.stackIndexes.pop();\r\n    }\r\n  }\r\n\r\n  [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CLEAR_CACHE](target, receiver) {\r\n    this.cache.clear();\r\n  }\r\n\r\n  [_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CLEAR_CACHE_NOUPDATED](target, receiver) {\r\n    this.cache.clearNoUpdated();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} prop \r\n   * @returns {{loopProperty:PropertyInfo,indexes:number[]}}\r\n   */\r\n  #getLoopPropertyAndIndexesFromPropertyName(prop) {\r\n    let { loopProperty, indexes } = this.propertyInfoAndIndexesByProp.get(prop) ?? {};\r\n    if (typeof loopProperty === \"undefined\") {\r\n      for(const property of this.loopProperties) {\r\n        const result = property.regexp.exec(prop);\r\n        if (result) {\r\n          indexes = result.slice(1).map(Number);\r\n          loopProperty = property;\r\n          this.propertyInfoAndIndexesByProp.set(prop, { loopProperty, indexes });\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return { loopProperty, indexes };\r\n  }\r\n  /**\r\n   * \r\n   * @param {ViewModel} target \r\n   * @param {string} prop \r\n   * @param {Proxy<ViewModel>} receiver \r\n   * @returns \r\n   */\r\n  get(target, prop, receiver) {\r\n    const { lastIndexes, component, cache, dependentMap } = this;\r\n    if (typeof prop === \"symbol\") {\r\n      switch(prop) {\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET:\r\n          return (prop, indexes) => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET], this, [prop, indexes, target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET:\r\n          return (prop, indexes, value) => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET], this, [prop, indexes, value, target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_GET_INDEXES:\r\n          return lastIndexes;\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_CALL:\r\n          return (prop, indexes, event) => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_CALL], this, [prop, indexes, event, target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_INIT:\r\n          return () => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_INIT], this, [target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_WRITE:\r\n          return (prop, indexes) => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_WRITE], this, [prop, indexes, target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CONNECT:\r\n          return () => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CONNECT], this, [target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CLEAR_CACHE:\r\n          return () => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CLEAR_CACHE], this, [target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CLEAR_CACHE_NOUPDATED:\r\n          return () => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_CLEAR_CACHE_NOUPDATED], this, [target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_NOTIFY_FOR_DEPENDENT_PROPS:\r\n          return (prop, indexes) => \r\n            Reflect.apply(this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_NOTIFY_FOR_DEPENDENT_PROPS], this, [prop, indexes, target, receiver]);\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_GET_TARGET:\r\n          return target;\r\n        case _Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_GET_DEPENDENT_MAP:\r\n          return dependentMap;\r\n      }\r\n    }\r\n    if (CONTEXT_INDEXES.has(prop)) {\r\n      return lastIndexes[Number(prop.slice(1)) - 1];\r\n    }\r\n    if (prop === CONTEXT_COMPONENT) {\r\n      return component;\r\n    }\r\n    if (prop === CONTEXT_DATA) {\r\n      return component.data;\r\n    }\r\n    if (prop === CONTEXT_OPEN_DIALOG) {\r\n      return async (name, data, attributes) => {\r\n        const dialog = document.createElement(_main_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].prefix ? (_main_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].prefix + \"-\" + name) : name);\r\n        Object.entries(attributes ?? {}).forEach(([key, value]) => {\r\n          dialog.setAttribute(key, value);\r\n        });\r\n        dialog.data[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_BIND_DATA](data ?? {});\r\n        document.body.appendChild(dialog);\r\n        return dialog.alivePromise;\r\n      };\r\n    }\r\n    if (prop === CONTEXT_CLOSE_DIALOG) {\r\n      return (data) => {\r\n        Object.assign(component.data, data);\r\n        component.parentNode.removeChild(component);\r\n      };\r\n    }\r\n    if (prop === CONTEXT_NOTIFY) {\r\n      return (prop, indexes) => {\r\n        const definedProp = this.definedPropertyByProp.get(prop);\r\n//        cache.delete(definedProp, indexes);\r\n        component.updateSlot.addNotify(new _thread_Notifier_js__WEBPACK_IMPORTED_MODULE_7__.NotifyData(component, prop, indexes));\r\n      };\r\n    }\r\n\r\n    const defindedProperty = this.definedPropertyByProp.get(prop);\r\n    if (defindedProperty) {\r\n      // すでに、indexesはセットされている\r\n      return this.#getDefinedPropertyValue(target, defindedProperty, receiver);\r\n    } else {\r\n      if (prop[0] === \"@\") {\r\n        const propName = prop.slice(1);\r\n        const defindedProperty = this.definedPropertyByProp.get(propName);\r\n        if (defindedProperty) {\r\n          return defindedProperty.expand(receiver, []).map(indexes => {\r\n            const value = this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](propName, indexes, target, receiver);\r\n            return [ value, indexes];\r\n          });\r\n        }\r\n      }\r\n      if (prop[0] !== \"_\") {\r\n        const {loopProperty, indexes} = this.#getLoopPropertyAndIndexesFromPropertyName(prop);\r\n        if (loopProperty && indexes) {\r\n          return this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_GET](loopProperty.name, indexes, target, receiver);\r\n        }\r\n      }\r\n      return Reflect.get(target, prop, receiver);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {ViewModel} target \r\n   * @param {string} prop \r\n   * @param {any} value \r\n   * @param {Proxy<ViewModel>} receiver \r\n   */\r\n  set(target, prop, value, receiver) {\r\n    const defindedProperty = this.definedPropertyByProp.get(prop);\r\n    if (defindedProperty) {\r\n      return this.#setDefinedPropertyValue(target, defindedProperty, value, receiver);\r\n    } else {\r\n      if (prop[0] === \"@\") {\r\n        const propName = prop.slice(1);\r\n        const defindedProperty = this.definedPropertyByProp.get(propName);\r\n        if (defindedProperty) {\r\n          defindedProperty.expand(receiver, []).forEach(indexes => {\r\n            this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](propName, indexes, value, target, receiver);\r\n          });\r\n          return true;\r\n        }\r\n      }\r\n      if (prop[0] !== \"_\") {\r\n        const {loopProperty, indexes} = this.#getLoopPropertyAndIndexesFromPropertyName(prop);\r\n        if (loopProperty && indexes) {\r\n          this[_Symbols_js__WEBPACK_IMPORTED_MODULE_2__.SYM_CALL_DIRECT_SET](loopProperty.name, indexes, value, target, receiver);\r\n          return true;\r\n        }\r\n      }\r\n      Reflect.set(target, prop, value, receiver);\r\n      return true;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Component} component\r\n * @param {ViewModel} origViewModel \r\n * @returns {Proxy<ViewModel>}\r\n */\r\nfunction create(component, origViewModel) {\r\n  const { viewModel, definedProperties, dependentMap } = _Accessor_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].convert(component, origViewModel);\r\n  return new Proxy(viewModel, new Handler(component, definedProperties, dependentMap));\r\n\r\n}\n\n//# sourceURL=webpack://quel/./src/viewModel/Proxy.js?");

/***/ }),

/***/ "./src/viewModel/Symbols.js":
/*!**********************************!*\
  !*** ./src/viewModel/Symbols.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SYM_CALL_BIND_DATA\": () => (/* binding */ SYM_CALL_BIND_DATA),\n/* harmony export */   \"SYM_CALL_BIND_PROPERTY\": () => (/* binding */ SYM_CALL_BIND_PROPERTY),\n/* harmony export */   \"SYM_CALL_CLEAR_CACHE\": () => (/* binding */ SYM_CALL_CLEAR_CACHE),\n/* harmony export */   \"SYM_CALL_CLEAR_CACHE_NOUPDATED\": () => (/* binding */ SYM_CALL_CLEAR_CACHE_NOUPDATED),\n/* harmony export */   \"SYM_CALL_CONNECT\": () => (/* binding */ SYM_CALL_CONNECT),\n/* harmony export */   \"SYM_CALL_DIRECT_CALL\": () => (/* binding */ SYM_CALL_DIRECT_CALL),\n/* harmony export */   \"SYM_CALL_DIRECT_GET\": () => (/* binding */ SYM_CALL_DIRECT_GET),\n/* harmony export */   \"SYM_CALL_DIRECT_SET\": () => (/* binding */ SYM_CALL_DIRECT_SET),\n/* harmony export */   \"SYM_CALL_INIT\": () => (/* binding */ SYM_CALL_INIT),\n/* harmony export */   \"SYM_CALL_NOTIFY_FOR_DEPENDENT_PROPS\": () => (/* binding */ SYM_CALL_NOTIFY_FOR_DEPENDENT_PROPS),\n/* harmony export */   \"SYM_CALL_WRITE\": () => (/* binding */ SYM_CALL_WRITE),\n/* harmony export */   \"SYM_GET_DEPENDENT_MAP\": () => (/* binding */ SYM_GET_DEPENDENT_MAP),\n/* harmony export */   \"SYM_GET_INDEXES\": () => (/* binding */ SYM_GET_INDEXES),\n/* harmony export */   \"SYM_GET_IS_PROXY\": () => (/* binding */ SYM_GET_IS_PROXY),\n/* harmony export */   \"SYM_GET_RAW\": () => (/* binding */ SYM_GET_RAW),\n/* harmony export */   \"SYM_GET_TARGET\": () => (/* binding */ SYM_GET_TARGET)\n/* harmony export */ });\n/* harmony import */ var _myname_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../myname.js */ \"./src/myname.js\");\n\r\n\r\nconst SYM_GET_INDEXES = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.indexes`);\r\nconst SYM_GET_TARGET = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.target`);\r\nconst SYM_GET_DEPENDENT_MAP = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.dependentMap`);\r\nconst SYM_CALL_DIRECT_GET = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.directGet`);\r\nconst SYM_CALL_DIRECT_SET = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.directSet`);\r\nconst SYM_CALL_DIRECT_CALL = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.directCall`);\r\nconst SYM_CALL_INIT = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.init`);\r\nconst SYM_CALL_CONNECT = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.connect`);\r\nconst SYM_CALL_WRITE = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.write`);\r\nconst SYM_CALL_CLEAR_CACHE = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.clearCache`);\r\nconst SYM_CALL_CLEAR_CACHE_NOUPDATED = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.clearCacheNoUpdated`);\r\nconst SYM_CALL_NOTIFY_FOR_DEPENDENT_PROPS = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:viewModel.notifyForDependentProps`);\r\n\r\nconst SYM_GET_IS_PROXY = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:arrayHandler.isProxy`);\r\nconst SYM_GET_RAW = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:arrayHandler.raw`);\r\n\r\nconst SYM_CALL_BIND_DATA = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:componentData.bindData`);\r\nconst SYM_CALL_BIND_PROPERTY = Symbol.for(`${_myname_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]}:componentData.bindProperty`);\r\n\n\n//# sourceURL=webpack://quel/./src/viewModel/Symbols.js?");

/***/ }),

/***/ "./src/view/View.js":
/*!**************************!*\
  !*** ./src/view/View.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ View)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./src/types.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_types_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _bind_Binder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../bind/Binder.js */ \"./src/bind/Binder.js\");\n/* harmony import */ var _bind_Binds_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../bind/Binds.js */ \"./src/bind/Binds.js\");\n/* harmony import */ var _component_Component_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../component/Component.js */ \"./src/component/Component.js\");\n\r\n\r\n\r\n\r\n\r\nclass View {\r\n  /**\r\n   * @type {HTMLTemplateElement}\r\n   */\r\n  template;\r\n  /**\r\n   * @type {HTMLElement}\r\n   */\r\n  rootElement;\r\n\r\n  /**\r\n   * \r\n   * @param {HTMLTemplateElement} template \r\n   * @param {HTMLElement} rootElement \r\n   */\r\n  constructor(template, rootElement) {\r\n    this.template = template;\r\n    this.rootElement = rootElement;\r\n  }\r\n\r\n  /**\r\n   * @param {Component} component\r\n   * @returns {Binds}\r\n   */\r\n  render(component) {\r\n    const content = document.importNode(this.template.content, true); // See http://var.blog.jp/archives/76177033.html\r\n    const binds = new _bind_Binds_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](_bind_Binder_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind(this.template, content, component));\r\n    this.rootElement.appendChild(content);\r\n    return binds;\r\n  }\r\n\r\n}\n\n//# sourceURL=webpack://quel/./src/view/View.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/export.js");
/******/ 	
/******/ })()
;